{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/SalariesIndex.vue?vue&type=template&id=33813683","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/SalariesIndex.vue","mtime":1647492207775},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGgxIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQiPtCX0LDRgNC/0LvQsNGC0Ys8L2gxPgogIDxkaXYgY2xhc3M9Im10LTQgbWItNiI+CiAgICA8QXRUYWJzCiAgICAgIDppdGVtcz0iWwogICAgICAgIHsgdGl0bGU6ICfQmNGB0YLQvtGA0LjRjyDQt9Cw0YDQv9C70LDRgtGLJywgdmFsdWU6ICdoaXN0b3J5JywgaWNvbjogJ2hvbWUnLCBleGFjdDogdHJ1ZSB9LAogICAgICAgIHsgdGl0bGU6ICfQl9Cw0L/Qu9Cw0L3QuNGA0L7QstCw0L3QvdCw0Y8g0LfQsNGA0L/Qu9Cw0YLQsCcsIHZhbHVlOiAnc2NoZWR1bGVkJywgaWNvbjogJ2NsaXBib2FyZExpc3QnIH0sCiAgICAgIF0iCiAgICAgIDptb2RlbC12YWx1ZT0iJHJvdXRlLnF1ZXJ5LnRhYiIKICAgICAgQHVwZGF0ZTptb2RlbC12YWx1ZT0iJHJvdXRlci5wdXNoKHsgcGF0aDogJHJvdXRlLnBhdGgsIHF1ZXJ5OiB7IHRhYjogJGV2ZW50IH0gfSkiCiAgICAvPgogIDwvZGl2PgogIDxjb21wb25lbnQKICAgIHYtaWY9ImRhdGFMaXN0VmFsdWU/Lmxlbmd0aCB8fCBhcnJheUZpbGwubGVuZ3RoIgogICAgOmlzPSJ0YWJDb21wb25lbnRzW3JvdXRlLnF1ZXJ5LnRhYl0/LmNvbXBvbmVudCB8fCB0YWJDb21wb25lbnRzLmhpc3RvcnkuY29tcG9uZW50IgogICAgdi1iaW5kPSJ0YWJDb21wb25lbnRzW3JvdXRlLnF1ZXJ5LnRhYl0/LnByb3BzIHx8IHRhYkNvbXBvbmVudHMuaGlzdG9yeS5wcm9wcyIKICA+PC9jb21wb25lbnQ+CiAgPGRpdiBjbGFzcz0ibXQtMiBmbGV4IGp1c3RpZnktZW5kIj4KICAgIDxhdC1wYWdpbmF0aW9uCiAgICAgIHYtaWY9ImluZGV4UGFnaW5hdGlvbi5tZXRhPy5sYXN0X3BhZ2UgPiAxIgogICAgICBjbGFzcz0icHktNCBtZDpjb2wtc3Bhbi0xIgogICAgICB2LW1vZGVsPSJxdWVyeTEucGFnZSIKICAgICAgOnRvdGFsPSJpbmRleFBhZ2luYXRpb24ubWV0YT8ubGFzdF9wYWdlIgogICAgPjwvYXQtcGFnaW5hdGlvbj4KICA8L2Rpdj4K"},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/SalariesIndex.vue"],"names":[],"mappings":";EAyIE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3C,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACN,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QAC1E,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;MAClF,CAAC;MACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAClF,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC9E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/SalariesIndex.vue","sourceRoot":"","sourcesContent":["<script>\n  export default {\n    beforeRouteEnter(to, from, next) {\n      if (!to.query.tab) return next({ path: to.path, query: { tab: 'history' } });\n      next();\n    },\n  };\n</script>\n\n<script setup>\n  import { useRoute } from 'vue-router';\n  import { computed, defineAsyncComponent, watch, onMounted, ref, watchEffect } from 'vue';\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\n  import { getAllColleagues } from '~/services/colleagues.api';\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\n  import { getAllSalaries } from '~/services/salaries.api';\n  import { $toast } from '~/main';\n  const AtPagination = defineAsyncComponent(() =>\n    import('~/plugins/aliftech-ui/components/AtPagination/AtPagination.js')\n  );\n  const HistorySalaries = defineAsyncComponent(() => import('~/components/salaries/HistorySalaries.vue'));\n  const AtTabs = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtTabs/AtTabs.js'));\n  const ScheduleSalaries = defineAsyncComponent(() => import('~/components/salaries/ScheduleSalaries.vue'));\n  const colleagues = ref([]);\n  const salariesActual = ref([]);\n  const salariesSchedule = ref([]);\n  const indexPagination = ref({});\n  const dataListValue = ref('');\n  const loading = ref(false);\n  const routerReplace = useRouterReplace();\n  const route = useRoute();\n  const arrayFill = ref(Array(1).fill(1));\n  const query1 = ref({\n    search: route.query.search || '',\n    department_id: route.query.department_id || '',\n    team_id: route.query.team_id || '',\n    page: route.query.page || '',\n    per_page: 15,\n  });\n\n  const getColleagues = async () => {\n    loading.value = true;\n    window.scrollTo(0, 0);\n    await getAllColleagues(query1.value)\n      .then(response => {\n        colleagues.value = response?.data?.data;\n        indexPagination.value = response?.data;\n        dataListValue.value = colleagues.value?.map(item => item.id).join(',');\n      })\n      .catch(error => {\n        if (error) {\n          $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n        }\n      })\n      .finally(() => (loading.value = false));\n    if (route.query.tab == 'history') {\n      getIndexSalariesActual();\n    } else {\n      getIndexSalariesSchedule();\n    }\n  };\n\n  const getIndexSalariesActual = async () => {\n    loading.value = true;\n    await getAllSalaries({ employee_ids: dataListValue.value, status: 'actual' })\n      .then(response => {\n        salariesActual.value = response.data?.data;\n      })\n      .catch(error => {\n        if (error) {\n          $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n        }\n      })\n      .finally(() => (loading.value = false));\n  };\n\n  const getIndexSalariesSchedule = async () => {\n    loading.value = true;\n    await getAllSalaries({ employee_ids: dataListValue.value, status: 'scheduled' })\n      .then(response => {\n        salariesSchedule.value = response.data?.data;\n      })\n      .catch(error => {\n        if (error) {\n          $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n        }\n      })\n      .finally(() => (loading.value = false));\n  };\n\n  onMounted(() => {\n    getColleagues();\n  });\n\n  watch(\n    () => route.query,\n    /**\n     * Fetch the user information when query change\n     * @param {Object} newQueryValue - Query object\n     */\n    newQueryValue => {\n      query1.value = deepCopy(newQueryValue);\n      getColleagues();\n    }\n  );\n\n  watchEffect(() => {\n    routerReplace.setRouter(query1);\n  });\n\n  const tabComponents = computed(() => ({\n    history: {\n      component: HistorySalaries,\n      props: {\n        loading: loading.value,\n        indexPagination: indexPagination.value,\n        colleagues: colleagues.value,\n        dataListValue: dataListValue.value,\n        salaries: salariesActual.value,\n        arrayFill: arrayFill.value,\n      },\n    },\n    scheduled: {\n      component: ScheduleSalaries,\n      props: {\n        loading: loading.value,\n        indexPagination: indexPagination.value,\n        colleagues: colleagues.value,\n        dataListValue: dataListValue.value,\n        salaries: salariesSchedule.value,\n        arrayFill: arrayFill.value,\n      },\n    },\n  }));\n</script>\n\n<template>\n  <h1 class=\"text-2xl font-bold\">Зарплаты</h1>\n  <div class=\"mt-4 mb-6\">\n    <AtTabs\n      :items=\"[\n        { title: 'История зарплаты', value: 'history', icon: 'home', exact: true },\n        { title: 'Запланированная зарплата', value: 'scheduled', icon: 'clipboardList' },\n      ]\"\n      :model-value=\"$route.query.tab\"\n      @update:model-value=\"$router.push({ path: $route.path, query: { tab: $event } })\"\n    />\n  </div>\n  <component\n    v-if=\"dataListValue?.length || arrayFill.length\"\n    :is=\"tabComponents[route.query.tab]?.component || tabComponents.history.component\"\n    v-bind=\"tabComponents[route.query.tab]?.props || tabComponents.history.props\"\n  ></component>\n  <div class=\"mt-2 flex justify-end\">\n    <at-pagination\n      v-if=\"indexPagination.meta?.last_page > 1\"\n      class=\"py-4 md:col-span-1\"\n      v-model=\"query1.page\"\n      :total=\"indexPagination.meta?.last_page\"\n    ></at-pagination>\n  </div>\n</template>\n\n<style scoped></style>\n"]}]}