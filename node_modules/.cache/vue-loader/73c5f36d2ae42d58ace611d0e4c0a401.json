{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/SurveysIndex.vue?vue&type=template&id=17518962","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/SurveysIndex.vue","mtime":1650602985530},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iLW0tNiBtYi00Ij4KICAgIDxkaXYgY2xhc3M9InctZnVsbCBiZy1hbHBoYSI+CiAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHAtNCBib3JkZXItYiI+CiAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJvbGQgcHgtMyI+0J/RgNC+0LTRg9C60YLQuNCy0L3QvtGB0YLRjDwvaDE+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+CiAgPGRpdiBjbGFzcz0ibXQtNCBtYi02Ij4KICAgIDxBdFRhYnMKICAgICAgOml0ZW1zPSJbeyB0aXRsZTogJ9CS0YHQtSDQvNC10YLRgNC40LrQuCcsIHZhbHVlOiAnYWxsTWV0cmljcycsIGljb246ICdwcmVzZW50YXRpb25DaGFydExpbmUnIH1dIgogICAgICA6bW9kZWwtdmFsdWU9IiRyb3V0ZS5xdWVyeS50YWIiCiAgICAgIEB1cGRhdGU6bW9kZWwtdmFsdWU9IiRyb3V0ZXIucHVzaCh7IHBhdGg6ICRyb3V0ZS5wYXRoLCBxdWVyeTogeyB0YWI6ICRldmVudCB9IH0pIgogICAgLz4KICA8L2Rpdj4KICA8Y29tcG9uZW50CiAgICA6aXM9InRhYkNvbXBvbmVudHNbcm91dGUucXVlcnkudGFiXT8uY29tcG9uZW50IHx8IHRhYkNvbXBvbmVudHMuYWxsTWV0cmljcy5jb21wb25lbnQiCiAgICB2LWJpbmQ9InRhYkNvbXBvbmVudHNbcm91dGUucXVlcnkudGFiXT8ucHJvcHMgfHwgdGFiQ29tcG9uZW50cy5hbGxNZXRyaWNzLnByb3BzIgogID48L2NvbXBvbmVudD4KICA8ZGl2IGNsYXNzPSJtdC0yIGZsZXgganVzdGlmeS1lbmQiPgogICAgPGF0LXBhZ2luYXRpb24KICAgICAgdi1pZj0iaW5kZXhQYWdpbmF0aW9uLm1ldGE/Lmxhc3RfcGFnZSA+IDEiCiAgICAgIGNsYXNzPSJweS00IG1kOmNvbC1zcGFuLTEiCiAgICAgIHYtbW9kZWw9InF1ZXJ5LnBhZ2UiCiAgICAgIDp0b3RhbD0iaW5kZXhQYWdpbmF0aW9uLm1ldGE/Lmxhc3RfcGFnZSIKICAgID48L2F0LXBhZ2luYXRpb24+CiAgPC9kaXY+Cg=="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/SurveysIndex.vue"],"names":[],"mappings":";EA8EE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACxD,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACtF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAClF,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/SurveysIndex.vue","sourceRoot":"","sourcesContent":["<script>\n  export default {\n    beforeRouteEnter(to, from, next) {\n      if (!to.query.tab) return next({ path: to.path, query: { tab: 'allMetrics' } });\n      next();\n    },\n  };\n</script>\n\n<script setup>\n  import { useRoute } from 'vue-router';\n  import { computed, defineAsyncComponent, watch, ref, watchEffect } from 'vue';\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\n  import { allProductivityMetrics } from '~/services/core/colleagues.api';\n  import { $toast } from '~/main';\n  import AllMetricsIndex from '~/components/productivity/AllMetricsIndex';\n  const AtPagination = defineAsyncComponent(() =>\n    import('~/plugins/aliftech-ui/components/AtPagination/AtPagination.js')\n  );\n  const AtTabs = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtTabs/AtTabs.js'));\n  const indexPagination = ref({});\n  const loading = ref(true);\n  const indexMetric = ref([]);\n  const routerReplace = useRouterReplace();\n  const route = useRoute();\n  const query = ref({\n    search: route.query.search || '',\n    department_id: route.query.department_id || '',\n    team_id: route.query.team_id || '',\n    page: route.query.page || '',\n    period: route.query.period || 'weekly',\n    per_page: 15,\n  });\n  const getColleaguesMetric = async () => {\n    loading.value = true;\n    await allProductivityMetrics(query.value)\n      .then(response => {\n        indexMetric.value = response?.data.data;\n        indexPagination.value = response?.data;\n      })\n      .catch(error => {\n        if (error) {\n          $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n        }\n      })\n      .finally(() => (loading.value = false));\n  };\n\n  watch(\n    () => route.query,\n    /**\n     * Fetch the user information when query change\n     * @param {Object} newQueryValue - Query object\n     */\n    newQueryValue => {\n      query.value = deepCopy(newQueryValue);\n    }\n  );\n\n  watchEffect(() => {\n    getColleaguesMetric();\n    routerReplace.setRouter(query);\n  });\n\n  const tabComponents = computed(() => ({\n    allMetrics: {\n      component: AllMetricsIndex,\n      props: {\n        loading: loading.value,\n        indexPagination: indexPagination.value,\n        indexMetric: indexMetric.value,\n      },\n    },\n  }));\n</script>\n\n<template>\n  <div class=\"-m-6 mb-4\">\n    <div class=\"w-full bg-alpha\">\n      <div class=\"flex items-center p-4 border-b\">\n        <h1 class=\"text-2xl font-bold px-3\">Продуктивность</h1>\n      </div>\n    </div>\n  </div>\n  <div class=\"mt-4 mb-6\">\n    <AtTabs\n      :items=\"[{ title: 'Все метрики', value: 'allMetrics', icon: 'presentationChartLine' }]\"\n      :model-value=\"$route.query.tab\"\n      @update:model-value=\"$router.push({ path: $route.path, query: { tab: $event } })\"\n    />\n  </div>\n  <component\n    :is=\"tabComponents[route.query.tab]?.component || tabComponents.allMetrics.component\"\n    v-bind=\"tabComponents[route.query.tab]?.props || tabComponents.allMetrics.props\"\n  ></component>\n  <div class=\"mt-2 flex justify-end\">\n    <at-pagination\n      v-if=\"indexPagination.meta?.last_page > 1\"\n      class=\"py-4 md:col-span-1\"\n      v-model=\"query.page\"\n      :total=\"indexPagination.meta?.last_page\"\n    ></at-pagination>\n  </div>\n</template>\n\n<style scoped></style>\n"]}]}