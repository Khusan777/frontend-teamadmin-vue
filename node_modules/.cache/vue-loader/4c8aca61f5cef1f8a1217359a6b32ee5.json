{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue?vue&type=template&id=ec0659f2","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue","mtime":1647964791346},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9Ii1tLTYgbWItNCI+DQogICAgPGRpdiBjbGFzcz0idy1mdWxsIGJnLWFscGhhIj4NCiAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHAtNCBib3JkZXItYiI+DQogICAgICAgIDxoMSBjbGFzcz0idGV4dC0yeGwgZm9udC1ib2xkIHB4LTQiPtCh0L7RgtGA0YPQtNC90LjQutC4PC9oMT4NCiAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCiAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtNCBpdGVtcy1lbmQgZ2FwLXgtNCBnYXAteS02IG1iLTYiPg0KICAgIDxjb2xsZWFndWVzLWxpc3QgOmNvbGxlYWd1ZXM9ImNvbGxlYWd1ZXMiIDpsb2FkaW5nPSJsb2FkaW5nIj48L2NvbGxlYWd1ZXMtbGlzdD4NCiAgPC9kaXY+DQogIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1lbmQiPg0KICAgIDxhdC1wYWdpbmF0aW9uDQogICAgICB2LWlmPSJjb2xsZWFndWVzPy5tZXRhPy5sYXN0X3BhZ2UgPiAxIg0KICAgICAgY2xhc3M9InB5LTQgbWQ6Y29sLXNwYW4tMSBqdXN0aWZ5LWVuZCINCiAgICAgIHYtbW9kZWw9InF1ZXJ5Mi5wYWdlIg0KICAgICAgOnRvdGFsPSJjb2xsZWFndWVzPy5tZXRhPy5sYXN0X3BhZ2UiDQogICAgPg0KICAgIDwvYXQtcGFnaW5hdGlvbj4NCiAgPC9kaXY+DQo="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue"],"names":[],"mappings":"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","file":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"-m-6 mb-4\">\r\n    <div class=\"w-full bg-alpha\">\r\n      <div class=\"flex items-center p-4 border-b\">\r\n        <h1 class=\"text-2xl font-bold px-4\">Сотрудники</h1>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"grid grid-cols-4 items-end gap-x-4 gap-y-6 mb-6\">\r\n    <colleagues-list :colleagues=\"colleagues\" :loading=\"loading\"></colleagues-list>\r\n  </div>\r\n  <div class=\"flex justify-end\">\r\n    <at-pagination\r\n      v-if=\"colleagues?.meta?.last_page > 1\"\r\n      class=\"py-4 md:col-span-1 justify-end\"\r\n      v-model=\"query2.page\"\r\n      :total=\"colleagues?.meta?.last_page\"\r\n    >\r\n    </at-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref, watch, watchEffect, defineAsyncComponent } from 'vue';\r\n  import { useRoute } from 'vue-router';\r\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\r\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\r\n  import { $toast } from '~/main';\r\n  import { useStore } from 'vuex';\r\n\r\n  export default {\r\n    name: 'ColleaguesIndex',\r\n    components: {\r\n      ColleaguesList: defineAsyncComponent(() => import('~/components/colleagues/ColleaguesList')),\r\n      AtPagination: defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtPagination/AtPagination')),\r\n    },\r\n    setup() {\r\n      const route = useRoute();\r\n      const routerReplace = useRouterReplace();\r\n      const colleagues = ref({});\r\n      const loading = ref(false);\r\n      const store = useStore();\r\n      const query2 = ref({\r\n        search: route.query.search || '',\r\n        position_id: route.query.position_id || '',\r\n        department_id: route.query.department_id || '',\r\n        team_id: route.query.team_id || '',\r\n        page: route.query.page || '',\r\n        per_page: 15,\r\n      });\r\n\r\n      const getColleagues = () => {\r\n        loading.value = true;\r\n        window.scrollTo(0, 0);\r\n        store\r\n          .dispatch('core/getEmployeesData', query2.value)\r\n          .then(() => {\r\n            colleagues.value = store.getters['core/getEmployeeData']?.data;\r\n          })\r\n          .catch(() => {\r\n            $toast.show({ title: 'Error', subTitle: store.getters['core/getEmployeeData']?.error, type: 'error' });\r\n          })\r\n          .finally(() => (loading.value = store.getters['core/getEmployeeData'].loading));\r\n      };\r\n\r\n      getColleagues();\r\n\r\n      watchEffect(() => {\r\n        routerReplace.setRouter(query2);\r\n      });\r\n\r\n      watch(\r\n        () => route.query,\r\n        /**\r\n         * Fetch the user information when query change\r\n         * @param {Object} newQueryValue - Query object\r\n         */\r\n        newQueryValue => {\r\n          query2.value = deepCopy(newQueryValue);\r\n          getColleagues();\r\n        }\r\n      );\r\n      return {\r\n        colleagues,\r\n        getColleagues,\r\n        loading,\r\n        route,\r\n        query2,\r\n        routerReplace,\r\n      };\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}