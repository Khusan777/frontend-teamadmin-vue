{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/ProductivityIndex.vue?vue&type=template&id=cff51df2","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/ProductivityIndex.vue","mtime":1649844186491},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQgYXMgX3Jlc29sdmVEeW5hbWljQ29tcG9uZW50LCBub3JtYWxpemVQcm9wcyBhcyBfbm9ybWFsaXplUHJvcHMsIGd1YXJkUmVhY3RpdmVQcm9wcyBhcyBfZ3VhcmRSZWFjdGl2ZVByb3BzLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jayB9IGZyb20gInZ1ZSI7Cgp2YXIgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICItbS02IG1iLTQiCn0sIFsvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAidy1mdWxsIGJnLWFscGhhIgp9LCBbLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICBjbGFzczogImZsZXggaXRlbXMtY2VudGVyIHAtNCBib3JkZXItYiIKfSwgWy8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJoMSIsIHsKICBjbGFzczogInRleHQtMnhsIGZvbnQtYm9sZCBweC0zIgp9LCAi0J/RgNC+0LTRg9C60YLQuNCy0L3QvtGB0YLRjCIpXSldKV0sIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAibXQtNCBtYi02Igp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogIm10LTIgZmxleCBqdXN0aWZ5LWVuZCIKfTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgXyRzZXR1cCR0YWJDb21wb25lbnRzLCBfJHNldHVwJHRhYkNvbXBvbmVudHMyLCBfJHNldHVwJGluZGV4UGFnaW5hdGksIF8kc2V0dXAkaW5kZXhQYWdpbmF0aTI7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2hvaXN0ZWRfMSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgkc2V0dXBbIkF0VGFicyJdLCB7CiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6ICfQktGB0LUg0LzQtdGC0YDQuNC60LgnLAogICAgICB2YWx1ZTogJ2FsbE1ldHJpY3MnLAogICAgICBpY29uOiAncHJlc2VudGF0aW9uQ2hhcnRMaW5lJwogICAgfV0sCiAgICAibW9kZWwtdmFsdWUiOiBfY3R4LiRyb3V0ZS5xdWVyeS50YWIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gX2N0eC4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6IF9jdHguJHJvdXRlLnBhdGgsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHRhYjogJGV2ZW50CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm1vZGVsLXZhbHVlIl0pXSksIChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQoKChfJHNldHVwJHRhYkNvbXBvbmVudHMgPSAkc2V0dXAudGFiQ29tcG9uZW50c1skc2V0dXAucm91dGUucXVlcnkudGFiXSkgPT09IG51bGwgfHwgXyRzZXR1cCR0YWJDb21wb25lbnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfJHNldHVwJHRhYkNvbXBvbmVudHMuY29tcG9uZW50KSB8fCAkc2V0dXAudGFiQ29tcG9uZW50cy5hbGxNZXRyaWNzLmNvbXBvbmVudCksIF9ub3JtYWxpemVQcm9wcyhfZ3VhcmRSZWFjdGl2ZVByb3BzKCgoXyRzZXR1cCR0YWJDb21wb25lbnRzMiA9ICRzZXR1cC50YWJDb21wb25lbnRzWyRzZXR1cC5yb3V0ZS5xdWVyeS50YWJdKSA9PT0gbnVsbCB8fCBfJHNldHVwJHRhYkNvbXBvbmVudHMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfJHNldHVwJHRhYkNvbXBvbmVudHMyLnByb3BzKSB8fCAkc2V0dXAudGFiQ29tcG9uZW50cy5hbGxNZXRyaWNzLnByb3BzKSksIG51bGwsIDE2CiAgLyogRlVMTF9QUk9QUyAqLwogICkpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbKChfJHNldHVwJGluZGV4UGFnaW5hdGkgPSAkc2V0dXAuaW5kZXhQYWdpbmF0aW9uLm1ldGEpID09PSBudWxsIHx8IF8kc2V0dXAkaW5kZXhQYWdpbmF0aSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXyRzZXR1cCRpbmRleFBhZ2luYXRpLmxhc3RfcGFnZSkgPiAxID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCRzZXR1cFsiQXRQYWdpbmF0aW9uIl0sIHsKICAgIGtleTogMCwKICAgIGNsYXNzOiAicHktNCBtZDpjb2wtc3Bhbi0xIiwKICAgIG1vZGVsVmFsdWU6ICRzZXR1cC5xdWVyeS5wYWdlLAogICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC5xdWVyeS5wYWdlID0gJGV2ZW50OwogICAgfSksCiAgICB0b3RhbDogKF8kc2V0dXAkaW5kZXhQYWdpbmF0aTIgPSAkc2V0dXAuaW5kZXhQYWdpbmF0aW9uLm1ldGEpID09PSBudWxsIHx8IF8kc2V0dXAkaW5kZXhQYWdpbmF0aTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8kc2V0dXAkaW5kZXhQYWdpbmF0aTIubGFzdF9wYWdlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm1vZGVsVmFsdWUiLCAidG90YWwiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpXSldLCA2NAogIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICk7Cn0="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/productivity/ProductivityIndex.vue"],"names":[],"mappings":";;8BA8EE,mBAAA,CAMM,KANN,EAMM;AAND,EAAA,KAAK,EAAC;AAML,CANN,EAAsB,C,aACpB,mBAAA,CAIM,KAJN,EAIM;AAJD,EAAA,KAAK,EAAC;AAIL,CAJN,EAA4B,C,aAC1B,mBAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC;AAEL,CAFN,EAA2C,C,aACzC,mBAAA,CAAuD,IAAvD,EAAuD;AAAnD,EAAA,KAAK,EAAC;AAA6C,CAAvD,EAAoC,gBAApC,CADyC,CAA3C,CAD0B,CAA5B,CADoB,CAAtB,E;;AAAA,C;;;AAOK,EAAA,KAAK,EAAC;;;AAWN,EAAA,KAAK,EAAC;;;;;6DAlBX,U,EAOA,mBAAA,CAMM,KANN,EAAA,UAAA,EAMM,CALJ,YAAA,CAIE,MAAA,CAAA,QAAA,CAJF,EAIE;AAHC,IAAA,KAAK,EAAE,CAAA;AAAA,MAAA,KAAA,EAAA,aAAA;AAAA,MAAA,KAAA,EAAA,YAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAAA,CAGR;AAFC,mBAAa,IAAA,CAAA,MAAA,CAAO,KAAP,CAAa,GAE3B;AADC,2BAAkB,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,IAAA,CAAA,OAAA,CAAQ,IAAR,CAAY;AAAA,QAAA,IAAA,EAAS,IAAA,CAAA,MAAA,CAAO,IAAhB;AAAoB,QAAA,KAAA,EAAA;AAAA,UAAA,GAAA,EAAgB;AAAhB;AAApB,OAAZ,CAAF;AAAA,KAAA;AACnB,GAJF,E,IAAA,E;;AAAA,I,eAAA,CAKI,CANN,C,iBAOA,YAAA,CAGa,wBAAA,CAFN,0BAAA,MAAA,CAAA,aAAA,CAAc,MAAA,CAAA,KAAA,CAAM,KAAN,CAAY,GAA1B,iFAAgC,SAAhC,KAA6C,MAAA,CAAA,aAAA,CAAc,UAAd,CAAyB,SAEhE,CAHb,EACsF,eAAA,CAAA,mBAAA,CAC5E,2BAAA,MAAA,CAAA,aAAA,CAAc,MAAA,CAAA,KAAA,CAAM,KAAN,CAAY,GAA1B,mFAAgC,KAAhC,KAAyC,MAAA,CAAA,aAAA,CAAc,UAAd,CAAyB,KADU,CAAA,CADtF,EAEiF,IAFjF,EAEiF;AAAA;AAFjF,G,GAIA,mBAAA,CAOM,KAPN,EAAA,UAAA,EAOM,CALI,0BAAA,MAAA,CAAA,eAAA,CAAgB,IAAhB,gFAAsB,SAAtB,IAA+B,C,kBADvC,YAAA,CAKiB,MAAA,CAAA,cAAA,CALjB,EAKiB;UAAA;AAHf,IAAA,KAAK,EAAC,oBAGS;gBAFN,MAAA,CAAA,KAAA,CAAM,IAEA;;aAFN,MAAA,CAAA,KAAA,CAAM,IAAN,GAAU,M;MAEJ;AADd,IAAA,KAAK,4BAAE,MAAA,CAAA,eAAA,CAAgB,IAAlB,2DAAE,uBAAsB;AACf,GALjB,E,IAAA,E;;AAAA,I,uBAAA,C,qCAMI,CAPN,C","sourcesContent":["<script>\n  export default {\n    beforeRouteEnter(to, from, next) {\n      if (!to.query.tab) return next({ path: to.path, query: { tab: 'allMetrics' } });\n      next();\n    },\n  };\n</script>\n\n<script setup>\n  import { useRoute } from 'vue-router';\n  import { computed, defineAsyncComponent, watch, ref, watchEffect } from 'vue';\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\n  import { allProductivityMetrics } from '~/services/core/colleagues.api';\n  import { $toast } from '~/main';\n  import AllMetricsIndex from '~/components/productivity/AllMetricsIndex';\n  const AtPagination = defineAsyncComponent(() =>\n    import('~/plugins/aliftech-ui/components/AtPagination/AtPagination.js')\n  );\n  const AtTabs = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtTabs/AtTabs.js'));\n  const indexPagination = ref({});\n  const loading = ref(true);\n  const indexMetric = ref([]);\n  const routerReplace = useRouterReplace();\n  const route = useRoute();\n  const query = ref({\n    search: route.query.search || '',\n    department_id: route.query.department_id || '',\n    team_id: route.query.team_id || '',\n    page: route.query.page || '',\n    period: route.query.period || 'weekly',\n    per_page: 15,\n  });\n  const getColleaguesMetric = async () => {\n    loading.value = true;\n    await allProductivityMetrics(query.value)\n      .then(response => {\n        indexMetric.value = response?.data.data;\n        indexPagination.value = response?.data;\n      })\n      .catch(error => {\n        if (error) {\n          $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n        }\n      })\n      .finally(() => (loading.value = false));\n  };\n\n  watch(\n    () => route.query,\n    /**\n     * Fetch the user information when query change\n     * @param {Object} newQueryValue - Query object\n     */\n    newQueryValue => {\n      query.value = deepCopy(newQueryValue);\n    }\n  );\n\n  watchEffect(() => {\n    getColleaguesMetric();\n    routerReplace.setRouter(query);\n  });\n\n  const tabComponents = computed(() => ({\n    allMetrics: {\n      component: AllMetricsIndex,\n      props: {\n        loading: loading.value,\n        indexPagination: indexPagination.value,\n        indexMetric: indexMetric.value,\n      },\n    },\n  }));\n</script>\n\n<template>\n  <div class=\"-m-6 mb-4\">\n    <div class=\"w-full bg-alpha\">\n      <div class=\"flex items-center p-4 border-b\">\n        <h1 class=\"text-2xl font-bold px-3\">Продуктивность</h1>\n      </div>\n    </div>\n  </div>\n  <div class=\"mt-4 mb-6\">\n    <AtTabs\n      :items=\"[{ title: 'Все метрики', value: 'allMetrics', icon: 'presentationChartLine' }]\"\n      :model-value=\"$route.query.tab\"\n      @update:model-value=\"$router.push({ path: $route.path, query: { tab: $event } })\"\n    />\n  </div>\n  <component\n    :is=\"tabComponents[route.query.tab]?.component || tabComponents.allMetrics.component\"\n    v-bind=\"tabComponents[route.query.tab]?.props || tabComponents.allMetrics.props\"\n  ></component>\n  <div class=\"mt-2 flex justify-end\">\n    <at-pagination\n      v-if=\"indexPagination.meta?.last_page > 1\"\n      class=\"py-4 md:col-span-1\"\n      v-model=\"query.page\"\n      :total=\"indexPagination.meta?.last_page\"\n    ></at-pagination>\n  </div>\n</template>\n\n<style scoped></style>\n"],"sourceRoot":""}]}