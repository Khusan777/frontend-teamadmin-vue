{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/plugins/aliftech-ui/components/AtCalendar/AtCalendar.js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/plugins/aliftech-ui/components/AtCalendar/AtCalendar.js","mtime":1649844186495},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FkbWluL0Rlc2t0b3AvTXlQcm9qZWN0cy9mcm9udGVuZC10ZWFtYWRtaW4tdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIFRyYW5zaXRpb24sIGNhcGl0YWxpemUsIHRvUmVmcywgZGVmaW5lQ29tcG9uZW50LCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IENoZXZyb25MZWZ0SWNvbiwgQ2hldnJvblJpZ2h0SWNvbiB9IGZyb20gJ0BoZXJvaWNvbnMvdnVlL291dGxpbmUvZXNtJzsKaW1wb3J0IHsgQ2hldnJvbkRvd25JY29uIH0gZnJvbSAnQGhlcm9pY29ucy92dWUvc29saWQvZXNtJzsKaW1wb3J0IHsgc2hvcnQgYXMgc2hvcnRXZWVrcyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy93ZWVrcyc7CmltcG9ydCB7IGZ1bGwgYXMgZnVsbE1vbnRocywgc2hvcnQgYXMgc2hvcnRNb250aHMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvbW9udGhzJzsKaW1wb3J0IHsgZnVsbCBhcyBmdWxsUXVhcnRlcnMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvcXVhcnRlcnMnOwppbXBvcnQgeyBmdWxsIGFzIGZ1bGxIYWxmWWVhcnMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvaGFsZlllYXJzJzsKaW1wb3J0IHsgY2hlY2tUeXBlLCBnZXREYXRlQnlIYWxmWWVhciwgZ2V0SGFsZlllYXJCeURhdGUsIGdldFF1YXJ0ZXJCeURhdGUsIGdldERhdGVCeVF1YXJ0ZXIgfSBmcm9tICcuLi8uLi91dGlscyc7CmltcG9ydCBDYWxlbmRhciBmcm9tICcuLi8uLi9taXhpbnMvcHJvcHMvQ2FsZW5kYXInOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIG5hbWU6ICdBdENhbGVuZGFyJywKICBlbWl0czogWyd1cGRhdGU6bW9kZWxWYWx1ZSddLAogIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIENhbGVuZGFyLnByb3BzKSwge30sIHsKICAgIG1vZGVsVmFsdWU6IHsKICAgICAgdHlwZTogW1N0cmluZywgRGF0ZSwgQXJyYXldLAogICAgICBkZWZhdWx0OiBuZXcgRGF0ZSgpCiAgICB9CiAgfSksCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdDsKICAgIC8vLy8gUHJvcGVydGllcwogICAgdmFyIGN1cnJlbnRNb250aCA9IHJlZihuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxKTsKICAgIHZhciBzZWxlY3RlZE1vbnRoID0gcmVmKG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEpOwogICAgdmFyIGN1cnJlbnRZZWFyID0gcmVmKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSk7CiAgICB2YXIgc2VsZWN0ZWRZZWFyID0gcmVmKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSk7CiAgICB2YXIgc2VsZWN0ZWRRdWFydGVyID0gcmVmKGdldFF1YXJ0ZXJCeURhdGUobmV3IERhdGUoKSkpOwogICAgdmFyIHNlbGVjdGVkSGFsZlllYXIgPSByZWYoZ2V0SGFsZlllYXJCeURhdGUobmV3IERhdGUoKSkpOwogICAgdmFyIG1vbnRoRGF5cyA9IHJlZihbXSk7CiAgICB2YXIgc2hvd01vbnRoWWVhckRyb3Bkb3duID0gcmVmKGZhbHNlKTsKICAgIHZhciBzZWxlY3RlZERheSA9IHJlZihudWxsKTsKICAgIHZhciB2YWx1ZSA9IHRvUmVmcyhwcm9wcykubW9kZWxWYWx1ZTsKICAgIHZhciBkYXRlUmFuZ2UgPSByZWYoW25ldyBEYXRlKCksIG5ldyBEYXRlKCldKTsKICAgIHZhciBzdGFydFllYXIgPSB0b1JlZnMocHJvcHMpLnN0YXJ0WWVhcjsKICAgIHZhciBlbmRZZWFyID0gdG9SZWZzKHByb3BzKS5lbmRZZWFyOyAvLyBsZXQgZGF0ZVJhbmdlQmV0d2VlbkRheXMgPSByZWYoMCk7CiAgICAvLy8vIFByb3BlcnRpZXMgLUVORAoKICAgIGlmICh2YWx1ZS52YWx1ZSAmJiAhcHJvcHMucmFuZ2UpIHsKICAgICAgY3VycmVudE1vbnRoLnZhbHVlID0gbmV3IERhdGUocHJvcHMubW9kZWxWYWx1ZSkuZ2V0TW9udGgoKSArIDE7CiAgICAgIHNlbGVjdGVkTW9udGgudmFsdWUgPSBuZXcgRGF0ZShwcm9wcy5tb2RlbFZhbHVlKS5nZXRNb250aCgpICsgMTsKICAgICAgY3VycmVudFllYXIudmFsdWUgPSBuZXcgRGF0ZShwcm9wcy5tb2RlbFZhbHVlKS5nZXRGdWxsWWVhcigpOwogICAgICBzZWxlY3RlZFllYXIudmFsdWUgPSBuZXcgRGF0ZShwcm9wcy5tb2RlbFZhbHVlKS5nZXRGdWxsWWVhcigpOwogICAgICBzZWxlY3RlZERheS52YWx1ZSA9IG5ldyBEYXRlKHByb3BzLm1vZGVsVmFsdWUpLmdldERhdGUoKTsKICAgICAgc2VsZWN0ZWRRdWFydGVyLnZhbHVlID0gTWF0aC5mbG9vcihnZXRRdWFydGVyQnlEYXRlKG5ldyBEYXRlKHByb3BzLm1vZGVsVmFsdWUpKSk7CiAgICAgIHNlbGVjdGVkSGFsZlllYXIudmFsdWUgPSBNYXRoLmZsb29yKGdldEhhbGZZZWFyQnlEYXRlKG5ldyBEYXRlKHByb3BzLm1vZGVsVmFsdWUpKSk7CiAgICB9IGVsc2UgaWYgKHByb3BzLnJhbmdlICYmIHZhbHVlLnZhbHVlLmxlbmd0aCA9PT0gMikgewogICAgICBkYXRlUmFuZ2UudmFsdWUgPSB2YWx1ZS52YWx1ZTsKICAgICAgc2VsZWN0ZWRRdWFydGVyLnZhbHVlID0gTWF0aC5mbG9vcihnZXRRdWFydGVyQnlEYXRlKG5ldyBEYXRlKGRhdGVSYW5nZS52YWx1ZVswXSkpKTsKICAgICAgc2VsZWN0ZWRIYWxmWWVhci52YWx1ZSA9IE1hdGguZmxvb3IoZ2V0SGFsZlllYXJCeURhdGUobmV3IERhdGUoZGF0ZVJhbmdlLnZhbHVlWzBdKSkpOwogICAgICBzZWxlY3RlZFllYXIudmFsdWUgPSBuZXcgRGF0ZShkYXRlUmFuZ2UudmFsdWVbMF0pLmdldEZ1bGxZZWFyKCk7CiAgICAgIGN1cnJlbnRZZWFyLnZhbHVlID0gbmV3IERhdGUoZGF0ZVJhbmdlLnZhbHVlWzBdKS5nZXRGdWxsWWVhcigpOwogICAgICBzZWxlY3RlZE1vbnRoLnZhbHVlID0gbmV3IERhdGUoZGF0ZVJhbmdlLnZhbHVlWzBdKS5nZXRNb250aCgpICsgMTsKICAgICAgY3VycmVudE1vbnRoLnZhbHVlID0gbmV3IERhdGUoZGF0ZVJhbmdlLnZhbHVlWzBdKS5nZXRNb250aCgpICsgMTsKICAgIH0gLy8vLyBDb21wdXRlZCBwcm9wZXJ0aWVzCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiB5ZWFycyB0byBzZWxlY3QKICAgICAqIEB0eXBlIHtDb21wdXRlZFJlZjwqW10+fQogICAgICovCgoKICAgIHZhciB5ZWFyc1RvU2VsZWN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgeWVhcnMgPSBbXTsKCiAgICAgIGZvciAodmFyIHllYXIgPSBzdGFydFllYXIudmFsdWU7IHllYXIgPD0gZW5kWWVhci52YWx1ZTsgeWVhcisrKSB7CiAgICAgICAgeWVhcnMucHVzaCh5ZWFyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHllYXJzOwogICAgfSk7CiAgICAvKioKICAgICAqIEdldCBkYXlzIGJlZm9yZSAxc3QgZGF5IG9mIGN1cnJlbnQgbW9udGggdG8gcHJpbnQKICAgICAqIEB0eXBlIHtDb21wdXRlZFJlZjxWTm9kZTxSZW5kZXJlck5vZGUsIFJlbmRlcmVyRWxlbWVudCwge1twOiBzdHJpbmddOiBhbnl9PltdPn0KICAgICAqLwoKICAgIHZhciBkYXlzQmVmb3JlQ3VycmVudE1vbnRoRGF5cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGRheXMgPSBbXTsKICAgICAgdmFyIHByZXZNb250aERhdGUgPSBuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIGN1cnJlbnRNb250aC52YWx1ZSAtIDEsIDApLmdldERhdGUoKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9udGhEYXlzLnZhbHVlWzBdLndlZWtEYXkgLSAxOyBpKyspIHsKICAgICAgICBkYXlzLnVuc2hpZnQocHJldk1vbnRoRGF0ZSAtIGkpOwogICAgICB9CgogICAgICByZXR1cm4gZGF5cy5tYXAoZnVuY3Rpb24gKGRheSkgewogICAgICAgIHZhciBhbGxvd2VkID0gaXNBbGxvd2VkRGF0ZShuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIChjdXJyZW50TW9udGgudmFsdWUgLSAyKSAlIDEyLCBkYXkpKTsKICAgICAgICByZXR1cm4gaCgnYnV0dG9uJywgewogICAgICAgICAgY2xhc3M6IFsndHJhbnNpdGlvbiBkdXJhdGlvbi0xNTAgcC0yIHctYXV0byB0ZXh0LWNlbnRlcicsIGFsbG93ZWQgPyAndGV4dC1ncmF5LTMwMCBob3Zlcjp0ZXh0LWdyYXktNDAwIGRhcms6dGV4dC1ncmF5LTQwMCBkYXJrOmhvdmVyOnRleHQtZ3JheS0zMDAnIDogJ2N1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LWdyYXktMjAwIGRhcms6dGV4dC1ncmF5LTUwMCddLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWQgPyBzZXRQcmV2TW9udGhEYXRlKGRheSkgOiBudWxsOwogICAgICAgICAgfQogICAgICAgIH0sIGRheSk7CiAgICAgIH0pOwogICAgfSk7CiAgICAvKioKICAgICAqIEdldCBkYXlzIGFmdGVyIGxhc3QgZGF5IG9mIGN1cnJlbnQgbW9udGggdG8gcHJpbnQKICAgICAqIEB0eXBlIHtDb21wdXRlZFJlZjxWTm9kZTxSZW5kZXJlck5vZGUsIFJlbmRlcmVyRWxlbWVudCwge1twOiBzdHJpbmddOiBhbnl9PltdPn0KICAgICAqLwoKICAgIHZhciBkYXlzQWZ0ZXJDdXJyZW50TW9udGhEYXlzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgZGF5cyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3IC0gbW9udGhEYXlzLnZhbHVlW21vbnRoRGF5cy52YWx1ZS5sZW5ndGggLSAxXS53ZWVrRGF5OyBpKyspIHsKICAgICAgICBkYXlzLnB1c2goaSArIDEpOwogICAgICB9CgogICAgICByZXR1cm4gZGF5cy5tYXAoZnVuY3Rpb24gKGRheSkgewogICAgICAgIHZhciBuZXh0TW9udGggPSBjdXJyZW50TW9udGgudmFsdWU7CiAgICAgICAgdmFyIHllYXJPZk5leHRNb250aCA9IHNlbGVjdGVkWWVhci52YWx1ZTsKCiAgICAgICAgaWYgKG5leHRNb250aCA+IDEyKSB7CiAgICAgICAgICB5ZWFyT2ZOZXh0TW9udGgrKzsKICAgICAgICAgIG5leHRNb250aCA9IDE7CiAgICAgICAgfQoKICAgICAgICB2YXIgYWxsb3dlZCA9IGlzQWxsb3dlZERhdGUobmV3IERhdGUoeWVhck9mTmV4dE1vbnRoLCBuZXh0TW9udGgsIGRheSkpOwogICAgICAgIHJldHVybiBoKCdidXR0b24nLCB7CiAgICAgICAgICBjbGFzczogWyd0cmFuc2l0aW9uIGR1cmF0aW9uLTE1MCBwLTIgdy1hdXRvIHRleHQtY2VudGVyJywgYWxsb3dlZCA/ICd0ZXh0LWdyYXktMzAwIGhvdmVyOnRleHQtZ3JheS00MDAgZGFyazp0ZXh0LWdyYXktNDAwIGRhcms6aG92ZXI6dGV4dC1ncmF5LTMwMCcgOiAnY3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtZ3JheS0yMDAgZGFyazp0ZXh0LWdyYXktNTAwJ10sCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gYWxsb3dlZCA/IHNldE5leHRNb250aERhdGUoZGF5KSA6IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfSwgZGF5KTsKICAgICAgfSk7CiAgICB9KTsKICAgIC8qKgogICAgICogVGhlIHRpdGxlIG9mIGRhdGVwaWNrZXIKICAgICAqIEB0eXBlIHtDb21wdXRlZFJlZjxzdHJpbmc+fQogICAgICovCgogICAgdmFyIGhlYWRlclRpdGxlID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgbW9udGhOYW1lID0gZnVsbE1vbnRoc1tjdXJyZW50TW9udGgudmFsdWUgLSAxXTsKICAgICAgcmV0dXJuICIiLmNvbmNhdChjYXBpdGFsaXplKG1vbnRoTmFtZSksICIgIikuY29uY2F0KHNlbGVjdGVkWWVhci52YWx1ZSk7CiAgICB9KTsgLy8vLyBDb21wdXRlZCBwcm9wZXJ0aWVzIC0gRU5ECgogICAgLyoqCiAgICAgKiBHZXQgRGF0ZSB3aXRob3V0IHRpbWUKICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZQogICAgICogQHJldHVybnMge0RhdGV9CiAgICAgKi8KCiAgICB2YXIgZ2V0RGF0ZVdpdGhvdXRUaW1lID0gZnVuY3Rpb24gZ2V0RGF0ZVdpdGhvdXRUaW1lKGRhdGUpIHsKICAgICAgdmFyIGRhdGVXaXRob3V0VGltZSA9IG5ldyBEYXRlKGRhdGUpOwogICAgICBkYXRlV2l0aG91dFRpbWUuc2V0SG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlV2l0aG91dFRpbWU7CiAgICB9OwogICAgLyoqCiAgICAgKiBDaGVjayBpZiBkYXRlIGlzIGFsbG93ZWQKICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZQogICAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICAgKi8KCgogICAgdmFyIGlzQWxsb3dlZERhdGUgPSBmdW5jdGlvbiBpc0FsbG93ZWREYXRlKGRhdGUpIHsKICAgICAgaWYgKHByb3BzLmFsbG93ZWREYXRlcykgewogICAgICAgIGlmIChjaGVja1R5cGUocHJvcHMuYWxsb3dlZERhdGVzLCAnYXJyYXknKSkgewogICAgICAgICAgcmV0dXJuIHByb3BzLmFsbG93ZWREYXRlcy5zb21lKGZ1bmN0aW9uIChhbGxvd2VkRGF0ZSkgewogICAgICAgICAgICByZXR1cm4gZ2V0RGF0ZVdpdGhvdXRUaW1lKGRhdGUpLmdldFRpbWUoKSA9PT0gZ2V0RGF0ZVdpdGhvdXRUaW1lKGFsbG93ZWREYXRlKS5nZXRUaW1lKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGNoZWNrVHlwZShwcm9wcy5hbGxvd2VkRGF0ZXMsICdvYmplY3QnKSkgewogICAgICAgICAgcmV0dXJuIGdldERhdGVXaXRob3V0VGltZShwcm9wcy5hbGxvd2VkRGF0ZXMuZnJvbSkuZ2V0VGltZSgpIDw9IGdldERhdGVXaXRob3V0VGltZShkYXRlKS5nZXRUaW1lKCkgJiYgZ2V0RGF0ZVdpdGhvdXRUaW1lKHByb3BzLmFsbG93ZWREYXRlcy50bykuZ2V0VGltZSgpID49IGdldERhdGVXaXRob3V0VGltZShkYXRlKS5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocHJvcHMuZGlzYWJsZWREYXRlcykgewogICAgICAgIGlmIChjaGVja1R5cGUocHJvcHMuZGlzYWJsZWREYXRlcywgJ2FycmF5JykpIHsKICAgICAgICAgIHJldHVybiAhcHJvcHMuZGlzYWJsZWREYXRlcy5zb21lKGZ1bmN0aW9uIChkaXNhYmxlZERhdGUpIHsKICAgICAgICAgICAgcmV0dXJuIGdldERhdGVXaXRob3V0VGltZShkYXRlKS5nZXRUaW1lKCkgPT09IGdldERhdGVXaXRob3V0VGltZShkaXNhYmxlZERhdGUpLmdldFRpbWUoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoY2hlY2tUeXBlKHByb3BzLmRpc2FibGVkRGF0ZXMsICdvYmplY3QnKSkgewogICAgICAgICAgcmV0dXJuIGdldERhdGVXaXRob3V0VGltZShwcm9wcy5kaXNhYmxlZERhdGVzLmZyb20pLmdldFRpbWUoKSA+IGdldERhdGVXaXRob3V0VGltZShkYXRlKS5nZXRUaW1lKCkgJiYgZ2V0RGF0ZVdpdGhvdXRUaW1lKHByb3BzLmRpc2FibGVkRGF0ZXMudG8pLmdldFRpbWUoKSA8IGdldERhdGVXaXRob3V0VGltZShkYXRlKS5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07IC8vLy8gV2F0Y2hlcnMKCgogICAgaWYgKHByb3BzLnJhbmdlKSB7CiAgICAgIHdhdGNoKGRhdGVSYW5nZSwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkYXRlUmFuZ2UudmFsdWUubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICBpZiAobmV3IERhdGUoZGF0ZVJhbmdlLnZhbHVlWzBdKSA+IG5ldyBEYXRlKGRhdGVSYW5nZS52YWx1ZVsxXSkpIHsKICAgICAgICAgICAgZGF0ZVJhbmdlLnZhbHVlID0gZGF0ZVJhbmdlLnZhbHVlLnJldmVyc2UoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGRhdGVSYW5nZS52YWx1ZSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgZGVlcDogdHJ1ZQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHdhdGNoKHNlbGVjdGVkRGF5LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIGN1cnJlbnRNb250aC52YWx1ZSAtIDEsIHNlbGVjdGVkRGF5LnZhbHVlKTsKICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGRhdGUpOwogICAgICB9KTsKICAgIH0gLy8vLyBXYXRjaGVycyAtIEVORAogICAgLy8vLyBJbnRlcm5hbCBoYW5kbGVycwoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBkYXkgd2VlayBudW1iZXIKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkYXRlCiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfG51bWJlcn0KICAgICAqLwoKCiAgICB2YXIgZ2V0RGF5T2ZEYXRlID0gZnVuY3Rpb24gZ2V0RGF5T2ZEYXRlKGRhdGUpIHsKICAgICAgdmFyIHdlZWtEYXkgPSBuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIGN1cnJlbnRNb250aC52YWx1ZSAtIDEsIGRhdGUpLmdldERheSgpOwogICAgICByZXR1cm4gd2Vla0RheSB8fCA3OwogICAgfTsKICAgIC8qKgogICAgICogR2V0IGN1cnJlbnQgbW9udGggZGF5cyBjb3VudAogICAgICogQHJldHVybnMge3ZvaWR9CiAgICAgKi8KCgogICAgdmFyIGdldEN1cnJlbnRNb250aERheXMgPSBmdW5jdGlvbiBnZXRDdXJyZW50TW9udGhEYXlzKCkgewogICAgICB2YXIgZGF5c0luTW9udGggPSBuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIGN1cnJlbnRNb250aC52YWx1ZSwgMCkuZ2V0RGF0ZSgpOwogICAgICB2YXIgZGF5cyA9IFtdOwoKICAgICAgZm9yICh2YXIgZGF5ID0gMTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkrKykgewogICAgICAgIGRheXMucHVzaCh7CiAgICAgICAgICB3ZWVrRGF5OiBnZXREYXlPZkRhdGUoZGF5KSwKICAgICAgICAgIGRhdGU6IGRheSwKICAgICAgICAgIGFsbG93ZWQ6IGlzQWxsb3dlZERhdGUobmV3IERhdGUoc2VsZWN0ZWRZZWFyLnZhbHVlLCBjdXJyZW50TW9udGgudmFsdWUgLSAxLCBkYXkpKQogICAgICAgIH0pOwogICAgICB9CgogICAgICBtb250aERheXMudmFsdWUgPSBkYXlzOwogICAgfTsKICAgIC8qKgogICAgICogR2V0IGN1cnJlbnQgeWVhcnMgbGlzdAogICAgICogQHJldHVybnMge0FycmF5fQogICAgICovCgoKICAgIHZhciBnZXRDdXJyZW50WWVhcnNMaXN0ID0gZnVuY3Rpb24gZ2V0Q3VycmVudFllYXJzTGlzdCgpIHsKICAgICAgdmFyIHllYXJzID0gW107CiAgICAgIHZhciBjdXJyZW50WWVhciA9IHNlbGVjdGVkWWVhci52YWx1ZTsKCiAgICAgIGZvciAodmFyIGkgPSAtNDsgaSA8IDU7IGkrKykgewogICAgICAgIHZhciB5ZWFyID0gY3VycmVudFllYXIgKyBpOwogICAgICAgIHZhciBhbGxvd2VkID0gaXNBbGxvd2VkRGF0ZShuZXcgRGF0ZSh5ZWFyLCBjdXJyZW50TW9udGgudmFsdWUgLSAxLCAxKSk7CiAgICAgICAgeWVhcnMucHVzaCh7CiAgICAgICAgICB2YWx1ZTogeWVhciwKICAgICAgICAgIGFsbG93ZWQ6IGFsbG93ZWQKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHllYXJzOwogICAgfTsKICAgIC8qKgogICAgICogR2V0IHF1YXJ0ZXJzIGxpc3QKICAgICAqIEByZXR1cm5zIHtBcnJheX0KICAgICAqLwoKCiAgICB2YXIgZ2V0UXVhcnRlcnNMaXN0ID0gZnVuY3Rpb24gZ2V0UXVhcnRlcnNMaXN0KCkgewogICAgICB2YXIgcXVhcnRlcnMgPSBbXTsKCiAgICAgIGZvciAodmFyIHF1YXJ0ZXIgPSAxOyBxdWFydGVyIDw9IDQ7IHF1YXJ0ZXIrKykgewogICAgICAgIHZhciBfZ2V0RGF0ZUJ5UXVhcnRlciA9IGdldERhdGVCeVF1YXJ0ZXIocXVhcnRlciwgc2VsZWN0ZWRZZWFyLnZhbHVlKSwKICAgICAgICAgICAgZGF0ZSA9IF9nZXREYXRlQnlRdWFydGVyLnJhbmdlOwoKICAgICAgICB2YXIgYWxsb3dlZCA9IGlzQWxsb3dlZERhdGUoZGF0ZVswXSkgJiYgaXNBbGxvd2VkRGF0ZShkYXRlWzFdKTsKICAgICAgICBxdWFydGVycy5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBxdWFydGVyLAogICAgICAgICAgdGl0bGU6IGZ1bGxRdWFydGVyc1txdWFydGVyXSwKICAgICAgICAgIGFsbG93ZWQ6IGFsbG93ZWQKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHF1YXJ0ZXJzOwogICAgfTsKICAgIC8qKgogICAgICogR2V0IGN1cnJlbnQgeWVhcnMgbGlzdAogICAgICogQHJldHVybnMge0FycmF5fQogICAgICovCgoKICAgIHZhciBnZXRIYWxmWWVhckxpc3QgPSBmdW5jdGlvbiBnZXRIYWxmWWVhckxpc3QoKSB7CiAgICAgIHZhciBoYWxmWWVhcnMgPSBbXTsKCiAgICAgIGZvciAodmFyIGhhbGZZZWFyID0gMTsgaGFsZlllYXIgPD0gMjsgaGFsZlllYXIrKykgewogICAgICAgIHZhciBfZ2V0RGF0ZUJ5SGFsZlllYXIgPSBnZXREYXRlQnlIYWxmWWVhcihoYWxmWWVhciwgc2VsZWN0ZWRZZWFyLnZhbHVlKSwKICAgICAgICAgICAgZGF0ZSA9IF9nZXREYXRlQnlIYWxmWWVhci5yYW5nZTsKCiAgICAgICAgdmFyIGFsbG93ZWQgPSBpc0FsbG93ZWREYXRlKGRhdGVbMF0pICYmIGlzQWxsb3dlZERhdGUoZGF0ZVsxXSk7CiAgICAgICAgaGFsZlllYXJzLnB1c2goewogICAgICAgICAgdmFsdWU6IGhhbGZZZWFyLAogICAgICAgICAgdGl0bGU6IGZ1bGxIYWxmWWVhcnNbaGFsZlllYXJdLAogICAgICAgICAgYWxsb3dlZDogYWxsb3dlZAogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gaGFsZlllYXJzOwogICAgfTsKCiAgICB2YXIgZ2V0UGlja2VyQnV0dG9uQ2xhc3NlcyA9IGZ1bmN0aW9uIGdldFBpY2tlckJ1dHRvbkNsYXNzZXMoY29uZGl0aW9uKSB7CiAgICAgIHJldHVybiBjb25kaXRpb24gPyAiYmctcHJpbWFyeS02MDAgZGFyazpiZy1wcmltYXJ5LTUwMCB0ZXh0LXdoaXRlIiA6ICd0ZXh0LWdyYXktNzAwIGRhcms6dGV4dC13aGl0ZSBob3ZlcjpiZy1ncmF5LTEwMCBkYXJrOmhvdmVyOmJnLWdyYXktODAwIGFjdGl2ZTpiZy1ncmF5LTMwMCBkYXJrOmFjdGl2ZTpiZy1ncmF5LTkwMCc7CiAgICB9OyAvLy8vIEludGVybmFsIGhhbmRsZXJzIC0gRU5ECiAgICAvLy8vIEV4dGVybmFsIGhhbmRsZXJzCgogICAgLyoqCiAgICAgKiBQcmV2aW91cyBtb250aCBkYXlzIGNsaWNrIGhhbmRsZXIKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkYXkKICAgICAqLwoKCiAgICB2YXIgc2V0UHJldk1vbnRoRGF0ZSA9IGZ1bmN0aW9uIHNldFByZXZNb250aERhdGUoKSB7CiAgICAgIHZhciBkYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHNlbGVjdGVkRGF5LnZhbHVlOwoKICAgICAgaWYgKGN1cnJlbnRNb250aC52YWx1ZSAtIDEgPT09IDApIHsKICAgICAgICBjdXJyZW50TW9udGgudmFsdWUgPSAxMjsKICAgICAgICBzZWxlY3RlZFllYXIudmFsdWUtLTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjdXJyZW50TW9udGgudmFsdWUtLTsKICAgICAgfQoKICAgICAgc2VsZWN0ZWREYXkudmFsdWUgPSBkYXk7CiAgICAgIGdldEN1cnJlbnRNb250aERheXMoKTsKICAgIH07CiAgICAvKioKICAgICAqIE5leHQgbW9udGggZGF5cyBjbGljayBoYW5kbGVyCiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGF5CiAgICAgKi8KCgogICAgdmFyIHNldE5leHRNb250aERhdGUgPSBmdW5jdGlvbiBzZXROZXh0TW9udGhEYXRlKCkgewogICAgICB2YXIgZGF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBzZWxlY3RlZERheS52YWx1ZTsKCiAgICAgIGlmIChjdXJyZW50TW9udGgudmFsdWUgKyAxID09PSAxMykgewogICAgICAgIGN1cnJlbnRNb250aC52YWx1ZSA9IDE7CiAgICAgICAgc2VsZWN0ZWRZZWFyLnZhbHVlKys7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudE1vbnRoLnZhbHVlKys7CiAgICAgIH0KCiAgICAgIHNlbGVjdGVkRGF5LnZhbHVlID0gZGF5OwogICAgICBnZXRDdXJyZW50TW9udGhEYXlzKCk7CiAgICB9OwogICAgLyoqCiAgICAgKiBTZXQgY3VycmVudCBtb250aCBmcm9tIG1vbnRoIHNlbGVjdG9yCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbW9udGgKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW1pdHRhYmxlCiAgICAgKi8KCgogICAgdmFyIHNldE1vbnRoID0gZnVuY3Rpb24gc2V0TW9udGgobW9udGgpIHsKICAgICAgdmFyIGVtaXR0YWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKCiAgICAgIGlmIChjdXJyZW50TW9udGgudmFsdWUgIT09IG1vbnRoICsgMSB8fCBjdXJyZW50WWVhci52YWx1ZSAhPT0gc2VsZWN0ZWRZZWFyLnZhbHVlKSB7CiAgICAgICAgY3VycmVudE1vbnRoLnZhbHVlID0gbW9udGggKyAxOwogICAgICAgIHNlbGVjdGVkTW9udGgudmFsdWUgPSBtb250aCArIDE7CiAgICAgICAgc2hvd01vbnRoWWVhckRyb3Bkb3duLnZhbHVlID0gZmFsc2U7CgogICAgICAgIGlmIChwcm9wcy50eXBlID09PSAnZGF0ZScpIHsKICAgICAgICAgIGdldEN1cnJlbnRNb250aERheXMoKTsKICAgICAgICB9CgogICAgICAgIGlmIChlbWl0dGFibGUpIHsKICAgICAgICAgIGlmIChwcm9wcy5yYW5nZSkgewogICAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIFtnZXREYXRlV2l0aG91dFRpbWUobmV3IERhdGUoc2VsZWN0ZWRZZWFyLnZhbHVlLCBjdXJyZW50TW9udGgudmFsdWUgLSAxLCAxKSksIGdldERhdGVXaXRob3V0VGltZShuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIGN1cnJlbnRNb250aC52YWx1ZSwgMCkpXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIG5ldyBEYXRlKHNlbGVjdGVkWWVhci52YWx1ZSwgY3VycmVudE1vbnRoLnZhbHVlIC0gMSwgc2VsZWN0ZWREYXkudmFsdWUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIFNldCBjdXJyZW50IHllYXIgZnJvbSB5ZWFyIHNlbGVjdG9yCiAgICAgKiBAcGFyYW0ge251bWJlcn0geWVhcgogICAgICogQHBhcmFtIHtib29sZWFufSBlbWl0dGFibGUKICAgICAqLwoKCiAgICB2YXIgc2V0WWVhciA9IGZ1bmN0aW9uIHNldFllYXIoeWVhcikgewogICAgICB2YXIgZW1pdHRhYmxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwoKICAgICAgaWYgKGN1cnJlbnRZZWFyLnZhbHVlICE9PSB5ZWFyIHx8IHNlbGVjdGVkWWVhci52YWx1ZSAhPT0geWVhcikgewogICAgICAgIHNlbGVjdGVkWWVhci52YWx1ZSA9IHllYXI7CiAgICAgICAgc2hvd01vbnRoWWVhckRyb3Bkb3duLnZhbHVlID0gZmFsc2U7CgogICAgICAgIGlmIChwcm9wcy50eXBlID09PSAnZGF0ZScpIHsKICAgICAgICAgIGdldEN1cnJlbnRNb250aERheXMoKTsKICAgICAgICB9CgogICAgICAgIGlmIChlbWl0dGFibGUpIHsKICAgICAgICAgIGlmIChwcm9wcy5yYW5nZSkgewogICAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIFtnZXREYXRlV2l0aG91dFRpbWUobmV3IERhdGUoc2VsZWN0ZWRZZWFyLnZhbHVlLCAwLCAxKSksIGdldERhdGVXaXRob3V0VGltZShuZXcgRGF0ZShzZWxlY3RlZFllYXIudmFsdWUsIDExICsgMSwgMCkpXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIG5ldyBEYXRlKHNlbGVjdGVkWWVhci52YWx1ZSwgY3VycmVudE1vbnRoLnZhbHVlIC0gMSwgc2VsZWN0ZWREYXkudmFsdWUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIFNldCBjdXJyZW50IHF1YXJ0ZXIKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBxdWFydGVyCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVtaXR0YWJsZQogICAgICovCgoKICAgIHZhciBzZXRRdWFydGVyID0gZnVuY3Rpb24gc2V0UXVhcnRlcihxdWFydGVyKSB7CiAgICAgIHZhciBlbWl0dGFibGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHNlbGVjdGVkUXVhcnRlci52YWx1ZSA9IHF1YXJ0ZXI7CgogICAgICB2YXIgX2dldERhdGVCeVF1YXJ0ZXIyID0gZ2V0RGF0ZUJ5UXVhcnRlcihxdWFydGVyLCBzZWxlY3RlZFllYXIudmFsdWUpLAogICAgICAgICAgc2luZ2xlID0gX2dldERhdGVCeVF1YXJ0ZXIyLnNpbmdsZSwKICAgICAgICAgIHJhbmdlID0gX2dldERhdGVCeVF1YXJ0ZXIyLnJhbmdlOwoKICAgICAgaWYgKGVtaXR0YWJsZSkgewogICAgICAgIGlmIChwcm9wcy5yYW5nZSkgewogICAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBbZ2V0RGF0ZVdpdGhvdXRUaW1lKHJhbmdlWzBdKSwgZ2V0RGF0ZVdpdGhvdXRUaW1lKHJhbmdlWzFdKV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGdldERhdGVXaXRob3V0VGltZShzaW5nbGUpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIFNldCBjdXJyZW50IGhhbGYgeWVhcgogICAgICogQHBhcmFtIHtudW1iZXJ9IHllYXIKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW1pdHRhYmxlCiAgICAgKi8KCgogICAgdmFyIHNldEhhbGZZZWFyID0gZnVuY3Rpb24gc2V0SGFsZlllYXIoaGFsZlllYXIpIHsKICAgICAgdmFyIGVtaXR0YWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKICAgICAgc2VsZWN0ZWRIYWxmWWVhci52YWx1ZSA9IGhhbGZZZWFyOwoKICAgICAgdmFyIF9nZXREYXRlQnlIYWxmWWVhcjIgPSBnZXREYXRlQnlIYWxmWWVhcihoYWxmWWVhciwgc2VsZWN0ZWRZZWFyLnZhbHVlKSwKICAgICAgICAgIHNpbmdsZSA9IF9nZXREYXRlQnlIYWxmWWVhcjIuc2luZ2xlLAogICAgICAgICAgcmFuZ2UgPSBfZ2V0RGF0ZUJ5SGFsZlllYXIyLnJhbmdlOwoKICAgICAgaWYgKGVtaXR0YWJsZSkgewogICAgICAgIGlmIChwcm9wcy5yYW5nZSkgewogICAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBbZ2V0RGF0ZVdpdGhvdXRUaW1lKHJhbmdlWzBdKSwgZ2V0RGF0ZVdpdGhvdXRUaW1lKHJhbmdlWzFdKV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGdldERhdGVXaXRob3V0VGltZShzaW5nbGUpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIFNlbGVjdCBkYXkKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXkKICAgICAqLwoKCiAgICB2YXIgc2V0Q3VycmVudERhdGVEYXkgPSBmdW5jdGlvbiBzZXRDdXJyZW50RGF0ZURheShkYXkpIHsKICAgICAgc2VsZWN0ZWRNb250aC52YWx1ZSA9IGN1cnJlbnRNb250aC52YWx1ZTsKICAgICAgc2VsZWN0ZWREYXkudmFsdWUgPSBkYXkuZGF0ZTsKICAgIH07CgogICAgdmFyIHNldERhdGVSYW5nZSA9IGZ1bmN0aW9uIHNldERhdGVSYW5nZShkYXksIG1vbnRoLCB5ZWFyKSB7CiAgICAgIGlmIChkYXRlUmFuZ2UudmFsdWVbMF0gJiYgZGF0ZVJhbmdlLnZhbHVlWzFdKSB7CiAgICAgICAgZGF0ZVJhbmdlLnZhbHVlID0gW107CiAgICAgIH0KCiAgICAgIGlmICghZGF0ZVJhbmdlLnZhbHVlWzBdICYmICFkYXRlUmFuZ2UudmFsdWVbMV0pIHsKICAgICAgICBkYXRlUmFuZ2UudmFsdWVbMF0gPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5LmRhdGUpOwogICAgICB9IGVsc2UgaWYgKGRhdGVSYW5nZS52YWx1ZVswXSAmJiAhZGF0ZVJhbmdlLnZhbHVlWzFdKSB7CiAgICAgICAgZGF0ZVJhbmdlLnZhbHVlWzFdID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheS5kYXRlKTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgY2hlY2tEYXlCZXR3ZWVuRGF0ZVJhbmdlID0gZnVuY3Rpb24gY2hlY2tEYXlCZXR3ZWVuRGF0ZVJhbmdlKGRheSkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHNlbGVjdGVkWWVhci52YWx1ZSwgY3VycmVudE1vbnRoLnZhbHVlIC0gMSwgZGF5LmRhdGUpOwogICAgICByZXR1cm4gZGF0ZSA+IG5ldyBEYXRlKGRhdGVSYW5nZS52YWx1ZVswXSkgJiYgZGF0ZS5nZXRNb250aCgpID09PSBjdXJyZW50TW9udGgudmFsdWUgLSAxICYmIGRhdGUgPCBuZXcgRGF0ZShkYXRlUmFuZ2UudmFsdWVbMV0pICYmIGRhdGUuZ2V0TW9udGgoKSA9PT0gY3VycmVudE1vbnRoLnZhbHVlIC0gMTsKICAgIH07CgogICAgdmFyIHJlbmRlclBpY2tlclRlbXBsYXRlQnlUeXBlID0gZnVuY3Rpb24gcmVuZGVyUGlja2VyVGVtcGxhdGVCeVR5cGUoKSB7CiAgICAgIGlmIChwcm9wcy50eXBlID09PSAnZGF0ZScpIHsKICAgICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgICAgY2xhc3M6ICdncmlkIGdyaWQtY29scy03IGdhcC0xJwogICAgICAgIH0sIFtkYXlzQmVmb3JlQ3VycmVudE1vbnRoRGF5cy52YWx1ZSwgbW9udGhEYXlzLnZhbHVlLm1hcChmdW5jdGlvbiAoZGF5KSB7CiAgICAgICAgICByZXR1cm4gaCgnYnV0dG9uJywgewogICAgICAgICAgICBjbGFzczogWyd0cmFuc2l0aW9uIGR1cmF0aW9uLTE1MCBwLTEgdy1hdXRvIHRleHQtY2VudGVyIHJvdW5kZWQtbWQnLCBkYXkuYWxsb3dlZCA/IGdldFBpY2tlckJ1dHRvbkNsYXNzZXMocHJvcHMucmFuZ2UgPyBkYXRlUmFuZ2UudmFsdWUuc29tZShmdW5jdGlvbiAoZGF0ZSkgewogICAgICAgICAgICAgIHJldHVybiBkYXRlLmdldERhdGUoKSA9PT0gZGF5LmRhdGUgJiYgZGF0ZS5nZXRNb250aCgpICsgMSA9PT0gY3VycmVudE1vbnRoLnZhbHVlICYmIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZWN0ZWRZZWFyLnZhbHVlOwogICAgICAgICAgICB9KSA6IGRheS5kYXRlID09PSBzZWxlY3RlZERheS52YWx1ZSAmJiBzZWxlY3RlZE1vbnRoLnZhbHVlID09PSBjdXJyZW50TW9udGgudmFsdWUgJiYgc2VsZWN0ZWRZZWFyLnZhbHVlID09PSBjdXJyZW50WWVhci52YWx1ZSkgOiAnY3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtZ3JheS0yMDAgZGFyazp0ZXh0LWdyYXktNTAwJywgY2hlY2tEYXlCZXR3ZWVuRGF0ZVJhbmdlKGRheSkgPyAiYmctcHJpbWFyeS0xMDAgZGFyazpiZy1wcmltYXJ5LTUwMCBkYXJrOmJnLW9wYWNpdHktMzAiIDogJyddLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIGlmIChkYXkuYWxsb3dlZCkgewogICAgICAgICAgICAgICAgaWYgKHByb3BzLnJhbmdlKSB7CiAgICAgICAgICAgICAgICAgIHNldERhdGVSYW5nZShkYXksIGN1cnJlbnRNb250aC52YWx1ZSAtIDEsIHNlbGVjdGVkWWVhci52YWx1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXRDdXJyZW50RGF0ZURheShkYXkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgZGF5LmRhdGUpOwogICAgICAgIH0pLCBkYXlzQWZ0ZXJDdXJyZW50TW9udGhEYXlzLnZhbHVlXSk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy50eXBlID09PSAnbW9udGgnKSB7CiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAnZ3JpZCBncmlkLWNvbHMtMyBnYXAtMScKICAgICAgICB9LCBbZnVsbE1vbnRocy5tYXAoZnVuY3Rpb24gKG1vbnRoLCBpbmRleCkgewogICAgICAgICAgdmFyIGFsbG93ZWQgPSBpc0FsbG93ZWREYXRlKG5ldyBEYXRlKHNlbGVjdGVkWWVhci52YWx1ZSwgaW5kZXgsIDEpKTsKICAgICAgICAgIHJldHVybiBoKCdidXR0b24nLCB7CiAgICAgICAgICAgIGNsYXNzOiBbJ3RyYW5zaXRpb24gZHVyYXRpb24tMTUwIHAtMSB3LWF1dG8gdGV4dC1jZW50ZXIgcm91bmRlZC1tZCcsIGFsbG93ZWQgPyBnZXRQaWNrZXJCdXR0b25DbGFzc2VzKGluZGV4ICsgMSA9PT0gY3VycmVudE1vbnRoLnZhbHVlICYmIHNlbGVjdGVkWWVhci52YWx1ZSA9PT0gY3VycmVudFllYXIudmFsdWUpIDogJ2N1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LWdyYXktMjAwIGRhcms6dGV4dC1ncmF5LTUwMCddLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBhbGxvd2VkID8gc2V0TW9udGgoaW5kZXgpIDogbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgY2FwaXRhbGl6ZShtb250aCkpOwogICAgICAgIH0pXSk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy50eXBlID09PSAneWVhcicpIHsKICAgICAgICB2YXIgeWVhcnMgPSBnZXRDdXJyZW50WWVhcnNMaXN0KCk7CiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAnZ3JpZCBncmlkLWNvbHMtMyBnYXAtMScKICAgICAgICB9LCBbeWVhcnMubWFwKGZ1bmN0aW9uICh5ZWFyKSB7CiAgICAgICAgICByZXR1cm4gaCgnYnV0dG9uJywgewogICAgICAgICAgICBjbGFzczogWyd0cmFuc2l0aW9uIGR1cmF0aW9uLTE1MCBwLTEgdy1hdXRvIHRleHQtY2VudGVyIHJvdW5kZWQtbWQnLCB5ZWFyLmFsbG93ZWQgPyBnZXRQaWNrZXJCdXR0b25DbGFzc2VzKHllYXIudmFsdWUgPT09IGN1cnJlbnRZZWFyLnZhbHVlKSA6ICdjdXJzb3Itbm90LWFsbG93ZWQgdGV4dC1ncmF5LTIwMCBkYXJrOnRleHQtZ3JheS01MDAnXSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4geWVhci5hbGxvd2VkID8gc2V0WWVhcih5ZWFyLnZhbHVlKSA6IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHllYXIudmFsdWUpOwogICAgICAgIH0pXSk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy50eXBlID09PSAncXVhcnRlcicpIHsKICAgICAgICB2YXIgcXVhcnRlcnMgPSBnZXRRdWFydGVyc0xpc3QoKTsKICAgICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgICAgY2xhc3M6ICdncmlkIGdyaWQtY29scy0yIGdhcC0xJwogICAgICAgIH0sIFtxdWFydGVycy5tYXAoZnVuY3Rpb24gKHF1YXJ0ZXIpIHsKICAgICAgICAgIHJldHVybiBoKCdidXR0b24nLCB7CiAgICAgICAgICAgIGNsYXNzOiBbJ3RyYW5zaXRpb24gZHVyYXRpb24tMTUwIHAtMSB3LWF1dG8gdGV4dC1jZW50ZXIgcm91bmRlZC1mdWxsJywgcXVhcnRlci5hbGxvd2VkID8gZ2V0UGlja2VyQnV0dG9uQ2xhc3NlcyhxdWFydGVyLnZhbHVlID09PSBzZWxlY3RlZFF1YXJ0ZXIudmFsdWUgJiYgY3VycmVudFllYXIudmFsdWUgPT09IHNlbGVjdGVkWWVhci52YWx1ZSkgOiAnY3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtZ3JheS0yMDAgZGFyazp0ZXh0LWdyYXktNTAwJ10sCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHF1YXJ0ZXIuYWxsb3dlZCA/IHNldFF1YXJ0ZXIocXVhcnRlci52YWx1ZSkgOiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBjYXBpdGFsaXplKHF1YXJ0ZXIudGl0bGUpKTsKICAgICAgICB9KV0pOwogICAgICB9CgogICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2hhbGYteWVhcicpIHsKICAgICAgICB2YXIgaGFsZlllYXJzID0gZ2V0SGFsZlllYXJMaXN0KCk7CiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAnZ3JpZCBncmlkLWNvbHMtMiBnYXAtMScKICAgICAgICB9LCBbaGFsZlllYXJzLm1hcChmdW5jdGlvbiAoaGFsZlllYXIpIHsKICAgICAgICAgIHJldHVybiBoKCdidXR0b24nLCB7CiAgICAgICAgICAgIGNsYXNzOiBbJ3RyYW5zaXRpb24gZHVyYXRpb24tMTUwIHAtMSB3LWF1dG8gdGV4dC1jZW50ZXIgcm91bmRlZC1mdWxsJywgaGFsZlllYXIuYWxsb3dlZCA/IGdldFBpY2tlckJ1dHRvbkNsYXNzZXMoaGFsZlllYXIudmFsdWUgPT09IHNlbGVjdGVkSGFsZlllYXIudmFsdWUgJiYgY3VycmVudFllYXIudmFsdWUgPT09IHNlbGVjdGVkWWVhci52YWx1ZSkgOiAnY3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtZ3JheS0yMDAgZGFyazp0ZXh0LWdyYXktNTAwJ10sCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbGZZZWFyLmFsbG93ZWQgPyBzZXRIYWxmWWVhcihoYWxmWWVhci52YWx1ZSkgOiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBjYXBpdGFsaXplKGhhbGZZZWFyLnRpdGxlKSk7CiAgICAgICAgfSldKTsKICAgICAgfQogICAgfTsgLy8vLyBFeHRlcm5hbCBoYW5kbGVzIC0gRU5ECgoKICAgIGlmIChwcm9wcy50eXBlID09PSAnZGF0ZScpIHsKICAgICAgZ2V0Q3VycmVudE1vbnRoRGF5cygpOwogICAgfQoKICAgIHZhciB5ZWFyc0Ryb3Bkb3duUmVmID0gcmVmKG51bGwpOwogICAgdmFyIGN1cnJlbnRZZWFyUmVmID0gcmVmKG51bGwpOwogICAgLyoqCiAgICAgKiBUb2dnbGUgeWVhcnMgZHJvcGRvd24gYW5kIHNjcm9sbCB0byBjdXJyZW50IHllYXIKICAgICAqIEByZXR1cm5zIHt2b2lkfQogICAgICovCgogICAgdmFyIHRvZ2dsZU1vbnRoWWVhckRyb3Bkb3duID0gZnVuY3Rpb24gdG9nZ2xlTW9udGhZZWFyRHJvcGRvd24oKSB7CiAgICAgIHNob3dNb250aFllYXJEcm9wZG93bi52YWx1ZSA9ICFzaG93TW9udGhZZWFyRHJvcGRvd24udmFsdWU7CiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoeWVhcnNEcm9wZG93blJlZi52YWx1ZSAmJiBzaG93TW9udGhZZWFyRHJvcGRvd24udmFsdWUgJiYgY3VycmVudFllYXJSZWYudmFsdWUpIHsKICAgICAgICAgIHllYXJzRHJvcGRvd25SZWYudmFsdWUuc2Nyb2xsVG9wID0gY3VycmVudFllYXJSZWYudmFsdWUub2Zmc2V0VG9wIC0geWVhcnNEcm9wZG93blJlZi52YWx1ZS5jbGllbnRIZWlnaHQgLyAyOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIG1vbnRoRGF5czogbW9udGhEYXlzLAogICAgICBzZWxlY3RlZERheTogc2VsZWN0ZWREYXksCiAgICAgIHNlbGVjdGVkWWVhcjogc2VsZWN0ZWRZZWFyLAogICAgICBjdXJyZW50WWVhcjogY3VycmVudFllYXIsCiAgICAgIGN1cnJlbnRNb250aDogY3VycmVudE1vbnRoLAogICAgICBoZWFkZXJUaXRsZTogaGVhZGVyVGl0bGUsCiAgICAgIHNob3dNb250aFllYXJEcm9wZG93bjogc2hvd01vbnRoWWVhckRyb3Bkb3duLAogICAgICB5ZWFyc1RvU2VsZWN0OiB5ZWFyc1RvU2VsZWN0LAogICAgICBkYXRlUmFuZ2U6IGRhdGVSYW5nZSwKICAgICAgc2V0TW9udGg6IHNldE1vbnRoLAogICAgICBzZXRZZWFyOiBzZXRZZWFyLAogICAgICBzZXRQcmV2TW9udGhEYXRlOiBzZXRQcmV2TW9udGhEYXRlLAogICAgICBzZXROZXh0TW9udGhEYXRlOiBzZXROZXh0TW9udGhEYXRlLAogICAgICByZW5kZXJQaWNrZXJUZW1wbGF0ZUJ5VHlwZTogcmVuZGVyUGlja2VyVGVtcGxhdGVCeVR5cGUsCiAgICAgIGRheXNCZWZvcmVDdXJyZW50TW9udGhEYXlzOiBkYXlzQmVmb3JlQ3VycmVudE1vbnRoRGF5cywKICAgICAgZGF5c0FmdGVyQ3VycmVudE1vbnRoRGF5czogZGF5c0FmdGVyQ3VycmVudE1vbnRoRGF5cywKICAgICAgc2V0Q3VycmVudERhdGVEYXk6IHNldEN1cnJlbnREYXRlRGF5LAogICAgICB5ZWFyc0Ryb3Bkb3duUmVmOiB5ZWFyc0Ryb3Bkb3duUmVmLAogICAgICBjdXJyZW50WWVhclJlZjogY3VycmVudFllYXJSZWYsCiAgICAgIHRvZ2dsZU1vbnRoWWVhckRyb3Bkb3duOiB0b2dnbGVNb250aFllYXJEcm9wZG93bgogICAgfTsKICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gaCgnZGl2JywgewogICAgICBjbGFzczogJ2Jsb2NrIHctZnVsbCBoLWZ1bGwgYmctd2hpdGUgZGFyazpiZy1ncmF5LTcwMCcKICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgIGNsYXNzOiAnZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGgtMTIgYm9yZGVyLWItMiBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS01MDAgZGFyazpib3JkZXItb3BhY2l0eS0zMCBtYi0xJwogICAgfSwgW2goJ2J1dHRvbicsIHsKICAgICAgY2xhc3M6ICdwLTIgdHJhbnNpdGlvbiBkdXJhdGlvbi0xNTAgcm91bmRlZC1tZCB0ZXh0LWdyYXktNzAwIGRhcms6dGV4dC1ncmF5LTMwMCBob3ZlcjpiZy1ncmF5LTEwMCBkYXJrOmhvdmVyOmJnLWdyYXktODAwJywKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICBpZiAoX3RoaXMudHlwZSA9PT0gJ3llYXInKSB7CiAgICAgICAgICBfdGhpcy5zZXRZZWFyKF90aGlzLnNlbGVjdGVkWWVhciAtIDMsIGZhbHNlKTsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpcy50eXBlID09PSAnbW9udGgnIHx8IF90aGlzLnR5cGUgPT09ICdxdWFydGVyJyB8fCBfdGhpcy50eXBlID09PSAnaGFsZi15ZWFyJykgewogICAgICAgICAgX3RoaXMuc2V0WWVhcihfdGhpcy5zZWxlY3RlZFllYXIgLSAxLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMudHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICBfdGhpcy5zZXRQcmV2TW9udGhEYXRlKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBbaChDaGV2cm9uTGVmdEljb24sIHsKICAgICAgY2xhc3M6ICdoLTUgdy01IHRleHQtZ3JheS03MDAgZGFyazp0ZXh0LWdyYXktMzAwJwogICAgfSldKSwgdGhpcy50eXBlID09PSAnZGF0ZScgPyBoKCdkaXYnLCB7CiAgICAgIGNsYXNzOiAncmVsYXRpdmUnCiAgICB9LCBbaCgnYnV0dG9uJywgewogICAgICBjbGFzczogJ3RyYW5zaXRpb24gZHVyYXRpb24tMTUwIGZvbnQtc2VtaWJvbGQgaG92ZXI6YmctZ3JheS0xMDAgcC0xIHB4LTMgcm91bmRlZC1tZCBkYXJrOnRleHQtd2hpdGUgZGFyazpob3ZlcjpiZy1ncmF5LTgwMCcsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnRvZ2dsZU1vbnRoWWVhckRyb3Bkb3duKCk7CiAgICAgIH0KICAgIH0sIFtoKCdzcGFuJywgewogICAgICBjbGFzczogJ2ZsZXggaXRlbXMtY2VudGVyJwogICAgfSwgW3RoaXMuaGVhZGVyVGl0bGUsIGgoQ2hldnJvbkRvd25JY29uLCB7CiAgICAgIGNsYXNzOiBbJ3RyYW5zZm9ybSBlYXNlLWluLW91dCBkdXJhdGlvbi0xNTAgdy01IGgtNSBtbC0xJywgewogICAgICAgICdyb3RhdGUtMTgwJzogdGhpcy5zaG93TW9udGhZZWFyRHJvcGRvd24KICAgICAgfV0KICAgIH0pXSldKSwgaChUcmFuc2l0aW9uLCB7CiAgICAgIGVudGVyQWN0aXZlQ2xhc3M6ICd0cmFuc2l0aW9uIGVhc2Utb3V0IGR1cmF0aW9uLTEwMCcsCiAgICAgIGVudGVyRnJvbUNsYXNzOiAndHJhbnNmb3JtIG9wYWNpdHktMCBzY2FsZS05NScsCiAgICAgIGVudGVyVG9DbGFzczogJ3RyYW5zZm9ybSBvcGFjaXR5LTEwMCBzY2FsZS0xMDAnLAogICAgICBsZWF2ZUFjdGl2ZUNsYXNzOiAndHJhbnNpdGlvbiBlYXNlLWluIGR1cmF0aW9uLTc1JywKICAgICAgbGVhdmVGcm9tQ2xhc3M6ICd0cmFuc2Zvcm0gb3BhY2l0eS0xMDAgc2NhbGUtMTAwJywKICAgICAgbGVhdmVUb0NsYXNzOiAndHJhbnNmb3JtIG9wYWNpdHktMCBzY2FsZS05NScKICAgIH0sIHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNob3dNb250aFllYXJEcm9wZG93biA/IGgoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAndHJhbnNpdGlvbiBkdXJhdGlvbi0xNTAgdy1mdWxsIGFic29sdXRlIGZsZXgganVzdGlmeS1jZW50ZXIgbXQtMSBweS0yIGJvcmRlci0yIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTUwMCByb3VuZGVkLW1kIGJnLXdoaXRlIGRhcms6YmctZ3JheS03MDAgc2hhZG93LWxnIG14LWF1dG8nCiAgICAgICAgfSwgW2goJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAnZ3JpZCBncmlkLWNvbHMtMiBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXInCiAgICAgICAgfSwgW2goJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAnbWF4LWgtNDggb3ZlcmZsb3cteC1oaWRkZW4gb3ZlcmZsb3cteS1hdXRvIGJvcmRlci1yLTIgYm9yZGVyLWdyYXktMjAwIGRhcms6Ym9yZGVyLWdyYXktNTAwIHB4LTInCiAgICAgICAgfSwgW3Nob3J0TW9udGhzLm1hcChmdW5jdGlvbiAobW9udGgsIGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gaCgnYnV0dG9uJywgewogICAgICAgICAgICBjbGFzczogWydwLTAuNScsIGluZGV4ICsgMSA9PT0gX3RoaXMuY3VycmVudE1vbnRoID8gInRleHQtcHJpbWFyeS02MDAgZGFyazp0ZXh0LXByaW1hcnktNDAwIGZvbnQtYm9sZCIgOiAndGV4dC1ncmF5LTcwMCBob3Zlcjp0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC1ncmF5LTMwMCBkYXJrOmhvdmVyOnRleHQtZ3JheS0xMDAnXSwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0TW9udGgoaW5kZXgsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgY2FwaXRhbGl6ZShtb250aCkpOwogICAgICAgIH0pXSksIGgoJ2RpdicsIHsKICAgICAgICAgIGNsYXNzOiAnbWF4LWgtNDggb3ZlcmZsb3cteC1oaWRkZW4gb3ZlcmZsb3cteS1hdXRvIHB4LTInLAogICAgICAgICAgcmVmOiAneWVhcnNEcm9wZG93blJlZicKICAgICAgICB9LCBbX3RoaXMueWVhcnNUb1NlbGVjdC5tYXAoZnVuY3Rpb24gKHllYXIpIHsKICAgICAgICAgIHJldHVybiBoKCdidXR0b24nLCB7CiAgICAgICAgICAgIHJlZjogeWVhciA9PT0gX3RoaXMuY3VycmVudFllYXIgPyAnY3VycmVudFllYXJSZWYnIDogbnVsbCwKICAgICAgICAgICAgY2xhc3M6IFsncC0wLjUnLCB5ZWFyID09PSBfdGhpcy5zZWxlY3RlZFllYXIgPyAidGV4dC1wcmltYXJ5LTYwMCBkYXJrOnRleHQtcHJpbWFyeS00MDAgZm9udC1ib2xkIiA6ICd0ZXh0LWdyYXktNzAwIGhvdmVyOnRleHQtZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMzAwIGRhcms6aG92ZXI6dGV4dC1ncmF5LTEwMCddLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXRZZWFyKHllYXIsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgeWVhcik7CiAgICAgICAgfSldKV0pXSkgOiBudWxsOwogICAgICB9CiAgICB9KV0pIDogaCgnc3BhbicsIHsKICAgICAgY2xhc3M6ICdmb250LXNlbWlib2xkIHAtMSBweC0zIHJvdW5kZWQtbWQgZGFyazp0ZXh0LXdoaXRlJwogICAgfSwgdGhpcy50eXBlID09PSAneWVhcicgPyB0aGlzLmN1cnJlbnRZZWFyIDogdGhpcy5zZWxlY3RlZFllYXIpLCBoKCdidXR0b24nLCB7CiAgICAgIGNsYXNzOiAncC0yIHRyYW5zaXRpb24gZHVyYXRpb24tMTUwIHJvdW5kZWQtbWQgdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDAgaG92ZXI6YmctZ3JheS0xMDAgZGFyazpob3ZlcjpiZy1ncmF5LTgwMCcsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgaWYgKF90aGlzLnR5cGUgPT09ICd5ZWFyJykgewogICAgICAgICAgX3RoaXMuc2V0WWVhcihfdGhpcy5zZWxlY3RlZFllYXIgKyAzLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMudHlwZSA9PT0gJ21vbnRoJyB8fCBfdGhpcy50eXBlID09PSAncXVhcnRlcicgfHwgX3RoaXMudHlwZSA9PT0gJ2hhbGYteWVhcicpIHsKICAgICAgICAgIF90aGlzLnNldFllYXIoX3RoaXMuc2VsZWN0ZWRZZWFyICsgMSwgZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgaWYgKF90aGlzLnR5cGUgPT09ICdkYXRlJykgewogICAgICAgICAgX3RoaXMuc2V0TmV4dE1vbnRoRGF0ZSgpOwogICAgICAgIH0gLy8gdGhpcy50eXBlICE9PSAnZGF0ZScgPyB0aGlzLnNldE5leHRZZWFyKCkgOiB0aGlzLnNldE5leHRNb250aERhdGUoKTsKCiAgICAgIH0KICAgIH0sIFtoKENoZXZyb25SaWdodEljb24sIHsKICAgICAgY2xhc3M6ICdoLTUgdy01IHRleHQtZ3JheS03MDAgZGFyazp0ZXh0LWdyYXktMzAwJwogICAgfSldKV0pLCB0aGlzLnR5cGUgPT09ICdkYXRlJyA/IGgoJ2RpdicsIHsKICAgICAgY2xhc3M6ICdncmlkIGdyaWQtY29scy03IGdhcC0xJwogICAgfSwgW3Nob3J0V2Vla3MubWFwKGZ1bmN0aW9uICh3ZWVrRGF5KSB7CiAgICAgIHJldHVybiBoKCdzcGFuJywgewogICAgICAgIGNsYXNzOiAndGV4dC1ncmF5LTQwMCBkYXJrOnRleHQtZ3JheS0zMDAgcC0yIHctYXV0byB0ZXh0LWNlbnRlcicKICAgICAgfSwgd2Vla0RheSk7CiAgICB9KV0pIDogbnVsbCwgdGhpcy5yZW5kZXJQaWNrZXJUZW1wbGF0ZUJ5VHlwZSgpXSk7CiAgfQp9KTs="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/plugins/aliftech-ui/components/AtCalendar/AtCalendar.js"],"names":["h","ref","computed","watch","Transition","capitalize","toRefs","defineComponent","nextTick","ChevronLeftIcon","ChevronRightIcon","ChevronDownIcon","short","shortWeeks","full","fullMonths","shortMonths","fullQuarters","fullHalfYears","checkType","getDateByHalfYear","getHalfYearByDate","getQuarterByDate","getDateByQuarter","Calendar","name","emits","props","modelValue","type","String","Date","Array","default","setup","emit","currentMonth","getMonth","selectedMonth","currentYear","getFullYear","selectedYear","selectedQuarter","selectedHalfYear","monthDays","showMonthYearDropdown","selectedDay","value","dateRange","startYear","endYear","range","getDate","Math","floor","length","yearsToSelect","years","year","push","daysBeforeCurrentMonthDays","days","prevMonthDate","i","weekDay","unshift","map","day","allowed","isAllowedDate","class","onClick","setPrevMonthDate","daysAfterCurrentMonthDays","nextMonth","yearOfNextMonth","setNextMonthDate","headerTitle","monthName","getDateWithoutTime","date","dateWithoutTime","setHours","allowedDates","some","allowedDate","getTime","from","to","disabledDates","disabledDate","reverse","deep","getDayOfDate","getDay","getCurrentMonthDays","daysInMonth","getCurrentYearsList","getQuartersList","quarters","quarter","title","getHalfYearList","halfYears","halfYear","getPickerButtonClasses","condition","setMonth","month","emittable","setYear","setQuarter","single","setHalfYear","setCurrentDateDay","setDateRange","checkDayBetweenDateRange","renderPickerTemplateByType","index","yearsDropdownRef","currentYearRef","toggleMonthYearDropdown","scrollTop","offsetTop","clientHeight","render","enterActiveClass","enterFromClass","enterToClass","leaveActiveClass","leaveFromClass","leaveToClass"],"mappings":"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","sourcesContent":["import { h, ref, computed, watch, Transition, capitalize, toRefs, defineComponent, nextTick } from 'vue';\nimport { ChevronLeftIcon, ChevronRightIcon } from '@heroicons/vue/outline/esm';\nimport { ChevronDownIcon } from '@heroicons/vue/solid/esm';\nimport { short as shortWeeks } from '../../constants/weeks';\nimport { full as fullMonths, short as shortMonths } from '../../constants/months';\nimport { full as fullQuarters } from '../../constants/quarters';\nimport { full as fullHalfYears } from '../../constants/halfYears';\nimport { checkType, getDateByHalfYear, getHalfYearByDate, getQuarterByDate, getDateByQuarter } from '../../utils';\nimport Calendar from '../../mixins/props/Calendar';\n\nexport default defineComponent({\n  name: 'AtCalendar',\n  emits: ['update:modelValue'],\n  props: {\n    ...Calendar.props,\n    modelValue: { type: [String, Date, Array], default: new Date() },\n  },\n  setup(props, { emit }) {\n    //// Properties\n    let currentMonth = ref(new Date().getMonth() + 1);\n    let selectedMonth = ref(new Date().getMonth() + 1);\n    let currentYear = ref(new Date().getFullYear());\n    let selectedYear = ref(new Date().getFullYear());\n    let selectedQuarter = ref(getQuarterByDate(new Date()));\n    let selectedHalfYear = ref(getHalfYearByDate(new Date()));\n    let monthDays = ref([]);\n    let showMonthYearDropdown = ref(false);\n    let selectedDay = ref(null);\n    let value = toRefs(props).modelValue;\n    let dateRange = ref([new Date(), new Date()]);\n    let startYear = toRefs(props).startYear;\n    let endYear = toRefs(props).endYear;\n    // let dateRangeBetweenDays = ref(0);\n    //// Properties -END\n\n    if (value.value && !props.range) {\n      currentMonth.value = new Date(props.modelValue).getMonth() + 1;\n      selectedMonth.value = new Date(props.modelValue).getMonth() + 1;\n      currentYear.value = new Date(props.modelValue).getFullYear();\n      selectedYear.value = new Date(props.modelValue).getFullYear();\n      selectedDay.value = new Date(props.modelValue).getDate();\n      selectedQuarter.value = Math.floor(getQuarterByDate(new Date(props.modelValue)));\n      selectedHalfYear.value = Math.floor(getHalfYearByDate(new Date(props.modelValue)));\n    } else if (props.range && value.value.length === 2) {\n      dateRange.value = value.value;\n      selectedQuarter.value = Math.floor(getQuarterByDate(new Date(dateRange.value[0])));\n      selectedHalfYear.value = Math.floor(getHalfYearByDate(new Date(dateRange.value[0])));\n      selectedYear.value = new Date(dateRange.value[0]).getFullYear();\n      currentYear.value = new Date(dateRange.value[0]).getFullYear();\n      selectedMonth.value = new Date(dateRange.value[0]).getMonth() + 1;\n      currentMonth.value = new Date(dateRange.value[0]).getMonth() + 1;\n    }\n\n    //// Computed properties\n    /**\n     * Array of years to select\n     * @type {ComputedRef<*[]>}\n     */\n    const yearsToSelect = computed(() => {\n      const years = [];\n      for (let year = startYear.value; year <= endYear.value; year++) {\n        years.push(year);\n      }\n      return years;\n    });\n\n    /**\n     * Get days before 1st day of current month to print\n     * @type {ComputedRef<VNode<RendererNode, RendererElement, {[p: string]: any}>[]>}\n     */\n    const daysBeforeCurrentMonthDays = computed(() => {\n      let days = [];\n      const prevMonthDate = new Date(selectedYear.value, currentMonth.value - 1, 0).getDate();\n      for (let i = 0; i < monthDays.value[0].weekDay - 1; i++) {\n        days.unshift(prevMonthDate - i);\n      }\n      return days.map(day => {\n        const allowed = isAllowedDate(new Date(selectedYear.value, (currentMonth.value - 2) % 12, day));\n        return h(\n          'button',\n          {\n            class: [\n              'transition duration-150 p-2 w-auto text-center',\n              allowed\n                ? 'text-gray-300 hover:text-gray-400 dark:text-gray-400 dark:hover:text-gray-300'\n                : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n            ],\n            onClick: () => (allowed ? setPrevMonthDate(day) : null),\n          },\n          day\n        );\n      });\n    });\n\n    /**\n     * Get days after last day of current month to print\n     * @type {ComputedRef<VNode<RendererNode, RendererElement, {[p: string]: any}>[]>}\n     */\n    const daysAfterCurrentMonthDays = computed(() => {\n      let days = [];\n      for (let i = 0; i < 7 - monthDays.value[monthDays.value.length - 1].weekDay; i++) {\n        days.push(i + 1);\n      }\n      return days.map(day => {\n        let nextMonth = currentMonth.value;\n        let yearOfNextMonth = selectedYear.value;\n        if (nextMonth > 12) {\n          yearOfNextMonth++;\n          nextMonth = 1;\n        }\n        const allowed = isAllowedDate(new Date(yearOfNextMonth, nextMonth, day));\n\n        return h(\n          'button',\n          {\n            class: [\n              'transition duration-150 p-2 w-auto text-center',\n              allowed\n                ? 'text-gray-300 hover:text-gray-400 dark:text-gray-400 dark:hover:text-gray-300'\n                : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n            ],\n            onClick: () => (allowed ? setNextMonthDate(day) : null),\n          },\n          day\n        );\n      });\n    });\n    /**\n     * The title of datepicker\n     * @type {ComputedRef<string>}\n     */\n    const headerTitle = computed(() => {\n      const monthName = fullMonths[currentMonth.value - 1];\n      return `${capitalize(monthName)} ${selectedYear.value}`;\n    });\n    //// Computed properties - END\n\n    /**\n     * Get Date without time\n     * @param {Date} date\n     * @returns {Date}\n     */\n    const getDateWithoutTime = date => {\n      const dateWithoutTime = new Date(date);\n      dateWithoutTime.setHours(0, 0, 0, 0);\n      return dateWithoutTime;\n    };\n\n    /**\n     * Check if date is allowed\n     * @param {Date} date\n     * @returns {boolean}\n     */\n    const isAllowedDate = date => {\n      if (props.allowedDates) {\n        if (checkType(props.allowedDates, 'array')) {\n          return props.allowedDates.some(\n            allowedDate => getDateWithoutTime(date).getTime() === getDateWithoutTime(allowedDate).getTime()\n          );\n        } else if (checkType(props.allowedDates, 'object')) {\n          return (\n            getDateWithoutTime(props.allowedDates.from).getTime() <= getDateWithoutTime(date).getTime() &&\n            getDateWithoutTime(props.allowedDates.to).getTime() >= getDateWithoutTime(date).getTime()\n          );\n        }\n      }\n      if (props.disabledDates) {\n        if (checkType(props.disabledDates, 'array')) {\n          return !props.disabledDates.some(disabledDate => {\n            return getDateWithoutTime(date).getTime() === getDateWithoutTime(disabledDate).getTime();\n          });\n        } else if (checkType(props.disabledDates, 'object')) {\n          return (\n            getDateWithoutTime(props.disabledDates.from).getTime() > getDateWithoutTime(date).getTime() &&\n            getDateWithoutTime(props.disabledDates.to).getTime() < getDateWithoutTime(date).getTime()\n          );\n        }\n      }\n      return true;\n    };\n\n    //// Watchers\n    if (props.range) {\n      watch(\n        dateRange,\n        () => {\n          if (dateRange.value.length === 2) {\n            if (new Date(dateRange.value[0]) > new Date(dateRange.value[1])) {\n              dateRange.value = dateRange.value.reverse();\n            }\n            emit('update:modelValue', dateRange.value);\n          }\n        },\n        { deep: true }\n      );\n    } else {\n      watch(selectedDay, () => {\n        const date = new Date(selectedYear.value, currentMonth.value - 1, selectedDay.value);\n        emit('update:modelValue', date);\n      });\n    }\n\n    //// Watchers - END\n\n    //// Internal handlers\n    /**\n     * Return the day week number\n     * @param {number} date\n     * @returns {number|number}\n     */\n    const getDayOfDate = date => {\n      const weekDay = new Date(selectedYear.value, currentMonth.value - 1, date).getDay();\n      return weekDay || 7;\n    };\n\n    /**\n     * Get current month days count\n     * @returns {void}\n     */\n    const getCurrentMonthDays = () => {\n      let daysInMonth = new Date(selectedYear.value, currentMonth.value, 0).getDate();\n      let days = [];\n\n      for (let day = 1; day <= daysInMonth; day++) {\n        days.push({\n          weekDay: getDayOfDate(day),\n          date: day,\n          allowed: isAllowedDate(new Date(selectedYear.value, currentMonth.value - 1, day)),\n        });\n      }\n\n      monthDays.value = days;\n    };\n\n    /**\n     * Get current years list\n     * @returns {Array}\n     */\n    const getCurrentYearsList = () => {\n      const years = [];\n      const currentYear = selectedYear.value;\n      for (let i = -4; i < 5; i++) {\n        const year = currentYear + i;\n        const allowed = isAllowedDate(new Date(year, currentMonth.value - 1, 1));\n        years.push({ value: year, allowed });\n      }\n      return years;\n    };\n\n    /**\n     * Get quarters list\n     * @returns {Array}\n     */\n    const getQuartersList = () => {\n      const quarters = [];\n      for (let quarter = 1; quarter <= 4; quarter++) {\n        const { range: date } = getDateByQuarter(quarter, selectedYear.value);\n        const allowed = isAllowedDate(date[0]) && isAllowedDate(date[1]);\n        quarters.push({ value: quarter, title: fullQuarters[quarter], allowed });\n      }\n      return quarters;\n    };\n\n    /**\n     * Get current years list\n     * @returns {Array}\n     */\n    const getHalfYearList = () => {\n      const halfYears = [];\n      for (let halfYear = 1; halfYear <= 2; halfYear++) {\n        const { range: date } = getDateByHalfYear(halfYear, selectedYear.value);\n        const allowed = isAllowedDate(date[0]) && isAllowedDate(date[1]);\n        halfYears.push({ value: halfYear, title: fullHalfYears[halfYear], allowed });\n      }\n      return halfYears;\n    };\n\n    const getPickerButtonClasses = condition => {\n      return condition\n        ? `bg-primary-600 dark:bg-primary-500 text-white`\n        : 'text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-300 dark:active:bg-gray-900';\n    };\n\n    //// Internal handlers - END\n\n    //// External handlers\n    /**\n     * Previous month days click handler\n     * @param {number} day\n     */\n    const setPrevMonthDate = (day = selectedDay.value) => {\n      if (currentMonth.value - 1 === 0) {\n        currentMonth.value = 12;\n        selectedYear.value--;\n      } else {\n        currentMonth.value--;\n      }\n      selectedDay.value = day;\n      getCurrentMonthDays();\n    };\n\n    /**\n     * Next month days click handler\n     * @param {number} day\n     */\n    const setNextMonthDate = (day = selectedDay.value) => {\n      if (currentMonth.value + 1 === 13) {\n        currentMonth.value = 1;\n        selectedYear.value++;\n      } else {\n        currentMonth.value++;\n      }\n      selectedDay.value = day;\n      getCurrentMonthDays();\n    };\n\n    /**\n     * Set current month from month selector\n     * @param {number} month\n     * @param {boolean} emittable\n     */\n    const setMonth = (month, emittable = true) => {\n      if (currentMonth.value !== month + 1 || currentYear.value !== selectedYear.value) {\n        currentMonth.value = month + 1;\n        selectedMonth.value = month + 1;\n        showMonthYearDropdown.value = false;\n        if (props.type === 'date') {\n          getCurrentMonthDays();\n        }\n\n        if (emittable) {\n          if (props.range) {\n            emit('update:modelValue', [\n              getDateWithoutTime(new Date(selectedYear.value, currentMonth.value - 1, 1)),\n              getDateWithoutTime(new Date(selectedYear.value, currentMonth.value, 0)),\n            ]);\n          } else {\n            emit('update:modelValue', new Date(selectedYear.value, currentMonth.value - 1, selectedDay.value));\n          }\n        }\n      }\n    };\n\n    /**\n     * Set current year from year selector\n     * @param {number} year\n     * @param {boolean} emittable\n     */\n    const setYear = (year, emittable = true) => {\n      if (currentYear.value !== year || selectedYear.value !== year) {\n        selectedYear.value = year;\n        showMonthYearDropdown.value = false;\n\n        if (props.type === 'date') {\n          getCurrentMonthDays();\n        }\n\n        if (emittable) {\n          if (props.range) {\n            emit('update:modelValue', [\n              getDateWithoutTime(new Date(selectedYear.value, 0, 1)),\n              getDateWithoutTime(new Date(selectedYear.value, 11 + 1, 0)),\n            ]);\n          } else {\n            emit('update:modelValue', new Date(selectedYear.value, currentMonth.value - 1, selectedDay.value));\n          }\n        }\n      }\n    };\n\n    /**\n     * Set current quarter\n     * @param {number} quarter\n     * @param {boolean} emittable\n     */\n    const setQuarter = (quarter, emittable = true) => {\n      selectedQuarter.value = quarter;\n\n      const { single, range } = getDateByQuarter(quarter, selectedYear.value);\n      if (emittable) {\n        if (props.range) {\n          emit('update:modelValue', [getDateWithoutTime(range[0]), getDateWithoutTime(range[1])]);\n        } else {\n          emit('update:modelValue', getDateWithoutTime(single));\n        }\n      }\n    };\n\n    /**\n     * Set current half year\n     * @param {number} year\n     * @param {boolean} emittable\n     */\n    const setHalfYear = (halfYear, emittable = true) => {\n      selectedHalfYear.value = halfYear;\n\n      const { single, range } = getDateByHalfYear(halfYear, selectedYear.value);\n      if (emittable) {\n        if (props.range) {\n          emit('update:modelValue', [getDateWithoutTime(range[0]), getDateWithoutTime(range[1])]);\n        } else {\n          emit('update:modelValue', getDateWithoutTime(single));\n        }\n      }\n    };\n\n    /**\n     * Select day\n     * @param {Object} day\n     */\n    const setCurrentDateDay = day => {\n      selectedMonth.value = currentMonth.value;\n      selectedDay.value = day.date;\n    };\n\n    const setDateRange = (day, month, year) => {\n      if (dateRange.value[0] && dateRange.value[1]) {\n        dateRange.value = [];\n      }\n      if (!dateRange.value[0] && !dateRange.value[1]) {\n        dateRange.value[0] = new Date(year, month, day.date);\n      } else if (dateRange.value[0] && !dateRange.value[1]) {\n        dateRange.value[1] = new Date(year, month, day.date);\n      }\n    };\n\n    const checkDayBetweenDateRange = day => {\n      const date = new Date(selectedYear.value, currentMonth.value - 1, day.date);\n      return (\n        date > new Date(dateRange.value[0]) &&\n        date.getMonth() === currentMonth.value - 1 &&\n        date < new Date(dateRange.value[1]) &&\n        date.getMonth() === currentMonth.value - 1\n      );\n    };\n\n    const renderPickerTemplateByType = () => {\n      if (props.type === 'date') {\n        return h('div', { class: 'grid grid-cols-7 gap-1' }, [\n          daysBeforeCurrentMonthDays.value,\n          monthDays.value.map(day => {\n            return h(\n              'button',\n              {\n                class: [\n                  'transition duration-150 p-1 w-auto text-center rounded-md',\n                  day.allowed\n                    ? getPickerButtonClasses(\n                        props.range\n                          ? dateRange.value.some(\n                              date =>\n                                date.getDate() === day.date &&\n                                date.getMonth() + 1 === currentMonth.value &&\n                                date.getFullYear() === selectedYear.value\n                            )\n                          : day.date === selectedDay.value &&\n                              selectedMonth.value === currentMonth.value &&\n                              selectedYear.value === currentYear.value\n                      )\n                    : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n                  checkDayBetweenDateRange(day) ? `bg-primary-100 dark:bg-primary-500 dark:bg-opacity-30` : '',\n                ],\n                onClick: () => {\n                  if (day.allowed) {\n                    if (props.range) {\n                      setDateRange(day, currentMonth.value - 1, selectedYear.value);\n                      return;\n                    }\n                    setCurrentDateDay(day);\n                  }\n                },\n              },\n              day.date\n            );\n          }),\n          daysAfterCurrentMonthDays.value,\n        ]);\n      }\n      if (props.type === 'month') {\n        return h('div', { class: 'grid grid-cols-3 gap-1' }, [\n          fullMonths.map((month, index) => {\n            const allowed = isAllowedDate(new Date(selectedYear.value, index, 1));\n\n            return h(\n              'button',\n              {\n                class: [\n                  'transition duration-150 p-1 w-auto text-center rounded-md',\n                  allowed\n                    ? getPickerButtonClasses(\n                        index + 1 === currentMonth.value && selectedYear.value === currentYear.value\n                      )\n                    : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n                ],\n                onClick: () => (allowed ? setMonth(index) : null),\n              },\n              capitalize(month)\n            );\n          }),\n        ]);\n      }\n      if (props.type === 'year') {\n        const years = getCurrentYearsList();\n        return h('div', { class: 'grid grid-cols-3 gap-1' }, [\n          years.map(year => {\n            return h(\n              'button',\n              {\n                class: [\n                  'transition duration-150 p-1 w-auto text-center rounded-md',\n                  year.allowed\n                    ? getPickerButtonClasses(year.value === currentYear.value)\n                    : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n                ],\n                onClick: () => (year.allowed ? setYear(year.value) : null),\n              },\n              year.value\n            );\n          }),\n        ]);\n      }\n      if (props.type === 'quarter') {\n        const quarters = getQuartersList();\n        return h('div', { class: 'grid grid-cols-2 gap-1' }, [\n          quarters.map(quarter => {\n            return h(\n              'button',\n              {\n                class: [\n                  'transition duration-150 p-1 w-auto text-center rounded-full',\n                  quarter.allowed\n                    ? getPickerButtonClasses(\n                        quarter.value === selectedQuarter.value && currentYear.value === selectedYear.value\n                      )\n                    : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n                ],\n                onClick: () => (quarter.allowed ? setQuarter(quarter.value) : null),\n              },\n              capitalize(quarter.title)\n            );\n          }),\n        ]);\n      }\n      if (props.type === 'half-year') {\n        const halfYears = getHalfYearList();\n        return h('div', { class: 'grid grid-cols-2 gap-1' }, [\n          halfYears.map(halfYear => {\n            return h(\n              'button',\n              {\n                class: [\n                  'transition duration-150 p-1 w-auto text-center rounded-full',\n                  halfYear.allowed\n                    ? getPickerButtonClasses(\n                        halfYear.value === selectedHalfYear.value && currentYear.value === selectedYear.value\n                      )\n                    : 'cursor-not-allowed text-gray-200 dark:text-gray-500',\n                ],\n                onClick: () => (halfYear.allowed ? setHalfYear(halfYear.value) : null),\n              },\n              capitalize(halfYear.title)\n            );\n          }),\n        ]);\n      }\n    };\n    //// External handles - END\n\n    if (props.type === 'date') {\n      getCurrentMonthDays();\n    }\n\n    const yearsDropdownRef = ref(null);\n    const currentYearRef = ref(null);\n\n    /**\n     * Toggle years dropdown and scroll to current year\n     * @returns {void}\n     */\n    const toggleMonthYearDropdown = () => {\n      showMonthYearDropdown.value = !showMonthYearDropdown.value;\n      nextTick(() => {\n        if (yearsDropdownRef.value && showMonthYearDropdown.value && currentYearRef.value) {\n          yearsDropdownRef.value.scrollTop = currentYearRef.value.offsetTop - yearsDropdownRef.value.clientHeight / 2;\n        }\n      });\n    };\n\n    return {\n      monthDays,\n      selectedDay,\n      selectedYear,\n      currentYear,\n      currentMonth,\n      headerTitle,\n      showMonthYearDropdown,\n      yearsToSelect,\n      dateRange,\n      setMonth,\n      setYear,\n      setPrevMonthDate,\n      setNextMonthDate,\n      renderPickerTemplateByType,\n      daysBeforeCurrentMonthDays,\n      daysAfterCurrentMonthDays,\n      setCurrentDateDay,\n      yearsDropdownRef,\n      currentYearRef,\n      toggleMonthYearDropdown,\n    };\n  },\n  render() {\n    return h('div', { class: 'block w-full h-full bg-white dark:bg-gray-700' }, [\n      h(\n        'div',\n        {\n          class:\n            'flex justify-between items-center h-12 border-b-2 border-gray-200 dark:border-gray-500 dark:border-opacity-30 mb-1',\n        },\n        [\n          h(\n            'button',\n            {\n              class:\n                'p-2 transition duration-150 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800',\n              onClick: () => {\n                if (this.type === 'year') {\n                  this.setYear(this.selectedYear - 3, false);\n                }\n                if (this.type === 'month' || this.type === 'quarter' || this.type === 'half-year') {\n                  this.setYear(this.selectedYear - 1, false);\n                }\n                if (this.type === 'date') {\n                  this.setPrevMonthDate();\n                }\n              },\n            },\n            [h(ChevronLeftIcon, { class: 'h-5 w-5 text-gray-700 dark:text-gray-300' })]\n          ),\n          this.type === 'date'\n            ? h('div', { class: 'relative' }, [\n                h(\n                  'button',\n                  {\n                    class:\n                      'transition duration-150 font-semibold hover:bg-gray-100 p-1 px-3 rounded-md dark:text-white dark:hover:bg-gray-800',\n                    onClick: () => this.toggleMonthYearDropdown(),\n                  },\n                  [\n                    h('span', { class: 'flex items-center' }, [\n                      this.headerTitle,\n                      h(ChevronDownIcon, {\n                        class: [\n                          'transform ease-in-out duration-150 w-5 h-5 ml-1',\n                          {\n                            'rotate-180': this.showMonthYearDropdown,\n                          },\n                        ],\n                      }),\n                    ]),\n                  ]\n                ),\n                h(\n                  Transition,\n                  {\n                    enterActiveClass: 'transition ease-out duration-100',\n                    enterFromClass: 'transform opacity-0 scale-95',\n                    enterToClass: 'transform opacity-100 scale-100',\n                    leaveActiveClass: 'transition ease-in duration-75',\n                    leaveFromClass: 'transform opacity-100 scale-100',\n                    leaveToClass: 'transform opacity-0 scale-95',\n                  },\n                  {\n                    default: () =>\n                      this.showMonthYearDropdown\n                        ? h(\n                            'div',\n                            {\n                              class:\n                                'transition duration-150 w-full absolute flex justify-center mt-1 py-2 border-2 border-gray-200 dark:border-gray-500 rounded-md bg-white dark:bg-gray-700 shadow-lg mx-auto',\n                            },\n                            [\n                              h('div', { class: 'grid grid-cols-2 items-center justify-center' }, [\n                                h(\n                                  'div',\n                                  {\n                                    class:\n                                      'max-h-48 overflow-x-hidden overflow-y-auto border-r-2 border-gray-200 dark:border-gray-500 px-2',\n                                  },\n                                  [\n                                    shortMonths.map((month, index) =>\n                                      h(\n                                        'button',\n                                        {\n                                          class: [\n                                            'p-0.5',\n                                            index + 1 === this.currentMonth\n                                              ? `text-primary-600 dark:text-primary-400 font-bold`\n                                              : 'text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100',\n                                          ],\n                                          onClick: () => this.setMonth(index, false),\n                                        },\n                                        capitalize(month)\n                                      )\n                                    ),\n                                  ]\n                                ),\n                                h(\n                                  'div',\n                                  { class: 'max-h-48 overflow-x-hidden overflow-y-auto px-2', ref: 'yearsDropdownRef' },\n                                  [\n                                    this.yearsToSelect.map(year =>\n                                      h(\n                                        'button',\n                                        {\n                                          ref: year === this.currentYear ? 'currentYearRef' : null,\n                                          class: [\n                                            'p-0.5',\n                                            year === this.selectedYear\n                                              ? `text-primary-600 dark:text-primary-400 font-bold`\n                                              : 'text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100',\n                                          ],\n                                          onClick: () => this.setYear(year, false),\n                                        },\n                                        year\n                                      )\n                                    ),\n                                  ]\n                                ),\n                              ]),\n                            ]\n                          )\n                        : null,\n                  }\n                ),\n              ])\n            : h(\n                'span',\n                { class: 'font-semibold p-1 px-3 rounded-md dark:text-white' },\n                this.type === 'year' ? this.currentYear : this.selectedYear\n              ),\n\n          h(\n            'button',\n            {\n              class:\n                'p-2 transition duration-150 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800',\n              onClick: () => {\n                if (this.type === 'year') {\n                  this.setYear(this.selectedYear + 3, false);\n                }\n                if (this.type === 'month' || this.type === 'quarter' || this.type === 'half-year') {\n                  this.setYear(this.selectedYear + 1, false);\n                }\n                if (this.type === 'date') {\n                  this.setNextMonthDate();\n                }\n                // this.type !== 'date' ? this.setNextYear() : this.setNextMonthDate();\n              },\n            },\n            [h(ChevronRightIcon, { class: 'h-5 w-5 text-gray-700 dark:text-gray-300' })]\n          ),\n        ]\n      ),\n\n      this.type === 'date'\n        ? h('div', { class: 'grid grid-cols-7 gap-1' }, [\n            shortWeeks.map(weekDay =>\n              h('span', { class: 'text-gray-400 dark:text-gray-300 p-2 w-auto text-center' }, weekDay)\n            ),\n          ])\n        : null,\n      this.renderPickerTemplateByType(),\n    ]);\n  },\n});\n"]}]}