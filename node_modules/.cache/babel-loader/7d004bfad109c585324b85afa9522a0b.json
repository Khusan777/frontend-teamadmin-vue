{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue","mtime":1647964791346},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgeyByZWYsIHdhdGNoLCB3YXRjaEVmZmVjdCwgZGVmaW5lQXN5bmNDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgdXNlUm91dGVyUmVwbGFjZSBmcm9tICd+L3V0aWxzL2hvb2tzL3VzZVJvdXRlclJlcGxhY2UnOwppbXBvcnQgeyBkZWVwQ29weSB9IGZyb20gJ34vcGx1Z2lucy9hbGlmdGVjaC11aS91dGlscyc7CmltcG9ydCB7ICR0b2FzdCB9IGZyb20gJ34vbWFpbic7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29sbGVhZ3Vlc0luZGV4JywKICBjb21wb25lbnRzOiB7CiAgICBDb2xsZWFndWVzTGlzdDogZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaW1wb3J0KCd+L2NvbXBvbmVudHMvY29sbGVhZ3Vlcy9Db2xsZWFndWVzTGlzdCcpOwogICAgfSksCiAgICBBdFBhZ2luYXRpb246IGRlZmluZUFzeW5jQ29tcG9uZW50KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnfi9wbHVnaW5zL2FsaWZ0ZWNoLXVpL2NvbXBvbmVudHMvQXRQYWdpbmF0aW9uL0F0UGFnaW5hdGlvbicpOwogICAgfSkKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICB2YXIgcm91dGVyUmVwbGFjZSA9IHVzZVJvdXRlclJlcGxhY2UoKTsKICAgIHZhciBjb2xsZWFndWVzID0gcmVmKHt9KTsKICAgIHZhciBsb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgcXVlcnkyID0gcmVmKHsKICAgICAgc2VhcmNoOiByb3V0ZS5xdWVyeS5zZWFyY2ggfHwgJycsCiAgICAgIHBvc2l0aW9uX2lkOiByb3V0ZS5xdWVyeS5wb3NpdGlvbl9pZCB8fCAnJywKICAgICAgZGVwYXJ0bWVudF9pZDogcm91dGUucXVlcnkuZGVwYXJ0bWVudF9pZCB8fCAnJywKICAgICAgdGVhbV9pZDogcm91dGUucXVlcnkudGVhbV9pZCB8fCAnJywKICAgICAgcGFnZTogcm91dGUucXVlcnkucGFnZSB8fCAnJywKICAgICAgcGVyX3BhZ2U6IDE1CiAgICB9KTsKCiAgICB2YXIgZ2V0Q29sbGVhZ3VlcyA9IGZ1bmN0aW9uIGdldENvbGxlYWd1ZXMoKSB7CiAgICAgIGxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdjb3JlL2dldEVtcGxveWVlc0RhdGEnLCBxdWVyeTIudmFsdWUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfc3RvcmUkZ2V0dGVycyRjb3JlRzsKCiAgICAgICAgY29sbGVhZ3Vlcy52YWx1ZSA9IChfc3RvcmUkZ2V0dGVycyRjb3JlRyA9IHN0b3JlLmdldHRlcnNbJ2NvcmUvZ2V0RW1wbG95ZWVEYXRhJ10pID09PSBudWxsIHx8IF9zdG9yZSRnZXR0ZXJzJGNvcmVHID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RvcmUkZ2V0dGVycyRjb3JlRy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9zdG9yZSRnZXR0ZXJzJGNvcmVHMjsKCiAgICAgICAgJHRvYXN0LnNob3coewogICAgICAgICAgdGl0bGU6ICdFcnJvcicsCiAgICAgICAgICBzdWJUaXRsZTogKF9zdG9yZSRnZXR0ZXJzJGNvcmVHMiA9IHN0b3JlLmdldHRlcnNbJ2NvcmUvZ2V0RW1wbG95ZWVEYXRhJ10pID09PSBudWxsIHx8IF9zdG9yZSRnZXR0ZXJzJGNvcmVHMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0b3JlJGdldHRlcnMkY29yZUcyLmVycm9yLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbG9hZGluZy52YWx1ZSA9IHN0b3JlLmdldHRlcnNbJ2NvcmUvZ2V0RW1wbG95ZWVEYXRhJ10ubG9hZGluZzsKICAgICAgfSk7CiAgICB9OwoKICAgIGdldENvbGxlYWd1ZXMoKTsKICAgIHdhdGNoRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgcm91dGVyUmVwbGFjZS5zZXRSb3V0ZXIocXVlcnkyKTsKICAgIH0pOwogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcm91dGUucXVlcnk7CiAgICB9LAogICAgLyoqDQogICAgICogRmV0Y2ggdGhlIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBxdWVyeSBjaGFuZ2UNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gbmV3UXVlcnlWYWx1ZSAtIFF1ZXJ5IG9iamVjdA0KICAgICAqLwogICAgZnVuY3Rpb24gKG5ld1F1ZXJ5VmFsdWUpIHsKICAgICAgcXVlcnkyLnZhbHVlID0gZGVlcENvcHkobmV3UXVlcnlWYWx1ZSk7CiAgICAgIGdldENvbGxlYWd1ZXMoKTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgY29sbGVhZ3VlczogY29sbGVhZ3VlcywKICAgICAgZ2V0Q29sbGVhZ3VlczogZ2V0Q29sbGVhZ3VlcywKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgcm91dGU6IHJvdXRlLAogICAgICBxdWVyeTI6IHF1ZXJ5MiwKICAgICAgcm91dGVyUmVwbGFjZTogcm91dGVyUmVwbGFjZQogICAgfTsKICB9Cn07"},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"-m-6 mb-4\">\r\n    <div class=\"w-full bg-alpha\">\r\n      <div class=\"flex items-center p-4 border-b\">\r\n        <h1 class=\"text-2xl font-bold px-4\">Сотрудники</h1>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"grid grid-cols-4 items-end gap-x-4 gap-y-6 mb-6\">\r\n    <colleagues-list :colleagues=\"colleagues\" :loading=\"loading\"></colleagues-list>\r\n  </div>\r\n  <div class=\"flex justify-end\">\r\n    <at-pagination\r\n      v-if=\"colleagues?.meta?.last_page > 1\"\r\n      class=\"py-4 md:col-span-1 justify-end\"\r\n      v-model=\"query2.page\"\r\n      :total=\"colleagues?.meta?.last_page\"\r\n    >\r\n    </at-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref, watch, watchEffect, defineAsyncComponent } from 'vue';\r\n  import { useRoute } from 'vue-router';\r\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\r\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\r\n  import { $toast } from '~/main';\r\n  import { useStore } from 'vuex';\r\n\r\n  export default {\r\n    name: 'ColleaguesIndex',\r\n    components: {\r\n      ColleaguesList: defineAsyncComponent(() => import('~/components/colleagues/ColleaguesList')),\r\n      AtPagination: defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtPagination/AtPagination')),\r\n    },\r\n    setup() {\r\n      const route = useRoute();\r\n      const routerReplace = useRouterReplace();\r\n      const colleagues = ref({});\r\n      const loading = ref(false);\r\n      const store = useStore();\r\n      const query2 = ref({\r\n        search: route.query.search || '',\r\n        position_id: route.query.position_id || '',\r\n        department_id: route.query.department_id || '',\r\n        team_id: route.query.team_id || '',\r\n        page: route.query.page || '',\r\n        per_page: 15,\r\n      });\r\n\r\n      const getColleagues = () => {\r\n        loading.value = true;\r\n        window.scrollTo(0, 0);\r\n        store\r\n          .dispatch('core/getEmployeesData', query2.value)\r\n          .then(() => {\r\n            colleagues.value = store.getters['core/getEmployeeData']?.data;\r\n          })\r\n          .catch(() => {\r\n            $toast.show({ title: 'Error', subTitle: store.getters['core/getEmployeeData']?.error, type: 'error' });\r\n          })\r\n          .finally(() => (loading.value = store.getters['core/getEmployeeData'].loading));\r\n      };\r\n\r\n      getColleagues();\r\n\r\n      watchEffect(() => {\r\n        routerReplace.setRouter(query2);\r\n      });\r\n\r\n      watch(\r\n        () => route.query,\r\n        /**\r\n         * Fetch the user information when query change\r\n         * @param {Object} newQueryValue - Query object\r\n         */\r\n        newQueryValue => {\r\n          query2.value = deepCopy(newQueryValue);\r\n          getColleagues();\r\n        }\r\n      );\r\n      return {\r\n        colleagues,\r\n        getColleagues,\r\n        loading,\r\n        route,\r\n        query2,\r\n        routerReplace,\r\n      };\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"sourceRoot":""}]}