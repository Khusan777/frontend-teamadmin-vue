{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue","mtime":1648667899487},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgeyByZWYsIHdhdGNoLCB3YXRjaEVmZmVjdCwgZGVmaW5lQXN5bmNDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgdXNlUm91dGVyUmVwbGFjZSBmcm9tICd+L3V0aWxzL2hvb2tzL3VzZVJvdXRlclJlcGxhY2UnOwppbXBvcnQgeyBkZWVwQ29weSB9IGZyb20gJ34vcGx1Z2lucy9hbGlmdGVjaC11aS91dGlscyc7CmltcG9ydCB7ICR0b2FzdCB9IGZyb20gJ34vbWFpbic7CmltcG9ydCB7IGdldEFsbENvbGxlYWd1ZXMgfSBmcm9tICd+L3NlcnZpY2VzL2NvbGxlYWd1ZXMuYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb2xsZWFndWVzSW5kZXgnLAogIGNvbXBvbmVudHM6IHsKICAgIENvbGxlYWd1ZXNMaXN0OiBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ34vY29tcG9uZW50cy9jb2xsZWFndWVzL0NvbGxlYWd1ZXNMaXN0Jyk7CiAgICB9KSwKICAgIEF0UGFnaW5hdGlvbjogZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaW1wb3J0KCd+L3BsdWdpbnMvYWxpZnRlY2gtdWkvY29tcG9uZW50cy9BdFBhZ2luYXRpb24vQXRQYWdpbmF0aW9uJyk7CiAgICB9KQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHZhciByb3V0ZXJSZXBsYWNlID0gdXNlUm91dGVyUmVwbGFjZSgpOwogICAgdmFyIGNvbGxlYWd1ZXMgPSByZWYoe30pOwogICAgdmFyIGxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgdmFyIHF1ZXJ5MiA9IHJlZih7CiAgICAgIHNlYXJjaDogcm91dGUucXVlcnkuc2VhcmNoIHx8ICcnLAogICAgICBwb3NpdGlvbl9pZDogcm91dGUucXVlcnkucG9zaXRpb25faWQgfHwgJycsCiAgICAgIGRlcGFydG1lbnRfaWQ6IHJvdXRlLnF1ZXJ5LmRlcGFydG1lbnRfaWQgfHwgJycsCiAgICAgIHRlYW1faWQ6IHJvdXRlLnF1ZXJ5LnRlYW1faWQgfHwgJycsCiAgICAgIHBhZ2U6IHJvdXRlLnF1ZXJ5LnBhZ2UgfHwgJycsCiAgICAgIHBlcl9wYWdlOiAxNQogICAgfSk7CgogICAgdmFyIGdldENvbGxlYWd1ZXMgPSBmdW5jdGlvbiBnZXRDb2xsZWFndWVzKCkgewogICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogICAgICBnZXRBbGxDb2xsZWFndWVzKHF1ZXJ5Mi52YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb2xsZWFndWVzLnZhbHVlID0gcmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBfcmVzcG9uc2UkcmVzcG9uc2UsIF9yZXNwb25zZSRyZXNwb25zZSRkYTsKCiAgICAgICAgJHRvYXN0LnNob3coewogICAgICAgICAgdGl0bGU6ICdFcnJvcicsCiAgICAgICAgICBzdWJUaXRsZTogcmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVzcG9uc2UkcmVzcG9uc2UgPSByZXNwb25zZS5yZXNwb25zZSkgPT09IG51bGwgfHwgX3Jlc3BvbnNlJHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Jlc3BvbnNlJHJlc3BvbnNlJGRhID0gX3Jlc3BvbnNlJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9yZXNwb25zZSRyZXNwb25zZSRkYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbnNlJHJlc3BvbnNlJGRhLm1lc3NhZ2UsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfTsKCiAgICBnZXRDb2xsZWFndWVzKCk7CiAgICB3YXRjaEVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICAgIHJvdXRlclJlcGxhY2Uuc2V0Um91dGVyKHF1ZXJ5Mik7CiAgICB9KTsKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJvdXRlLnF1ZXJ5OwogICAgfSwKICAgIC8qKg0KICAgICAqIEZldGNoIHRoZSB1c2VyIGluZm9ybWF0aW9uIHdoZW4gcXVlcnkgY2hhbmdlDQogICAgICogQHBhcmFtIHtPYmplY3R9IG5ld1F1ZXJ5VmFsdWUgLSBRdWVyeSBvYmplY3QNCiAgICAgKi8KICAgIGZ1bmN0aW9uIChuZXdRdWVyeVZhbHVlKSB7CiAgICAgIHF1ZXJ5Mi52YWx1ZSA9IGRlZXBDb3B5KG5ld1F1ZXJ5VmFsdWUpOwogICAgICBnZXRDb2xsZWFndWVzKCk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGNvbGxlYWd1ZXM6IGNvbGxlYWd1ZXMsCiAgICAgIGdldENvbGxlYWd1ZXM6IGdldENvbGxlYWd1ZXMsCiAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgIHJvdXRlOiByb3V0ZSwKICAgICAgcXVlcnkyOiBxdWVyeTIsCiAgICAgIHJvdXRlclJlcGxhY2U6IHJvdXRlclJlcGxhY2UKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue"],"names":[],"mappings":";;;;;AAuBE,SAAS,GAAT,EAAc,KAAd,EAAqB,WAArB,EAAkC,oBAAlC,QAA8D,KAA9D;AACA,SAAS,QAAT,QAAyB,YAAzB;AACA,OAAO,gBAAP,MAA6B,gCAA7B;AACA,SAAS,QAAT,QAAyB,6BAAzB;AACA,SAAS,MAAT,QAAuB,QAAvB;AACA,SAAS,gBAAT,QAAiC,2BAAjC;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,iBADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,cAAc,EAAE,oBAAoB,CAAC;AAAA,aAAM,OAAO,wCAAP,CAAN;AAAA,KAAD,CAD1B;AAEV,IAAA,YAAY,EAAE,oBAAoB,CAAC;AAAA,aAAM,OAAO,4DAAP,CAAN;AAAA,KAAD;AAFxB,GAFC;AAMb,EAAA,KANa,mBAML;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,aAAY,GAAI,gBAAgB,EAAtC;AACA,QAAM,UAAS,GAAI,GAAG,CAAC,EAAD,CAAtB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,MAAK,GAAI,GAAG,CAAC;AACjB,MAAA,MAAM,EAAE,KAAK,CAAC,KAAN,CAAY,MAAZ,IAAsB,EADb;AAEjB,MAAA,WAAW,EAAE,KAAK,CAAC,KAAN,CAAY,WAAZ,IAA2B,EAFvB;AAGjB,MAAA,aAAa,EAAE,KAAK,CAAC,KAAN,CAAY,aAAZ,IAA6B,EAH3B;AAIjB,MAAA,OAAO,EAAE,KAAK,CAAC,KAAN,CAAY,OAAZ,IAAuB,EAJf;AAKjB,MAAA,IAAI,EAAE,KAAK,CAAC,KAAN,CAAY,IAAZ,IAAoB,EALT;AAMjB,MAAA,QAAQ,EAAE;AANO,KAAD,CAAlB;;AASA,QAAM,aAAY,GAAI,SAAhB,aAAgB,GAAM;AAC1B,MAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AACA,MAAA,MAAM,CAAC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AACA,MAAA,gBAAgB,CAAC,MAAM,CAAC,KAAR,CAAhB,CACG,IADH,CACQ,UAAA,QAAO,EAAK;AAChB,QAAA,UAAU,CAAC,KAAX,GAAmB,QAAnB,aAAmB,QAAnB,uBAAmB,QAAQ,CAAE,IAA7B;AACD,OAHH,EAIG,KAJH,CAIS,UAAA,QAAO,EAAK;AAAA;;AACjB,QAAA,MAAM,CAAC,IAAP,CAAY;AAAE,UAAA,KAAK,EAAE,OAAT;AAAkB,UAAA,QAAQ,EAAE,QAAF,aAAE,QAAF,6CAAE,QAAQ,CAAE,QAAZ,gFAAE,mBAAoB,IAAtB,0DAAE,sBAA0B,OAAtD;AAA+D,UAAA,IAAI,EAAE;AAArE,SAAZ;AACD,OANH,EAOG,OAPH,CAOW;AAAA,eAAO,OAAO,CAAC,KAAR,GAAgB,KAAvB;AAAA,OAPX;AAQD,KAXD;;AAaA,IAAA,aAAa;AAEb,IAAA,WAAW,CAAC,YAAM;AAChB,MAAA,aAAa,CAAC,SAAd,CAAwB,MAAxB;AACD,KAFU,CAAX;AAIA,IAAA,KAAK,CACH;AAAA,aAAM,KAAK,CAAC,KAAZ;AAAA,KADG;AAEH;AACC;AACA;AACA;AACD,cAAA,aAAY,EAAK;AACf,MAAA,MAAM,CAAC,KAAP,GAAe,QAAQ,CAAC,aAAD,CAAvB;AACA,MAAA,aAAa;AACf,KATG,CAAL;AAWA,WAAO;AACL,MAAA,UAAU,EAAV,UADK;AAEL,MAAA,aAAa,EAAb,aAFK;AAGL,MAAA,OAAO,EAAP,OAHK;AAIL,MAAA,KAAK,EAAL,KAJK;AAKL,MAAA,MAAM,EAAN,MALK;AAML,MAAA,aAAa,EAAb;AANK,KAAP;AAQD;AA1DY,CAAf","sourcesContent":["<template>\r\n  <div class=\"-m-6 mb-4\">\r\n    <div class=\"w-full bg-alpha\">\r\n      <div class=\"flex items-center p-4 border-b\">\r\n        <h1 class=\"text-2xl font-bold px-3\">Сотрудники</h1>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"grid grid-cols-4 items-end gap-x-4 gap-y-6 mb-6\">\r\n    <colleagues-list :colleagues=\"colleagues\" :loading=\"loading\"></colleagues-list>\r\n  </div>\r\n  <div class=\"flex justify-end\">\r\n    <at-pagination\r\n      v-if=\"colleagues?.meta?.last_page > 1\"\r\n      class=\"py-4 md:col-span-1 justify-end\"\r\n      v-model=\"query2.page\"\r\n      :total=\"colleagues?.meta?.last_page\"\r\n    >\r\n    </at-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref, watch, watchEffect, defineAsyncComponent } from 'vue';\r\n  import { useRoute } from 'vue-router';\r\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\r\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\r\n  import { $toast } from '~/main';\r\n  import { getAllColleagues } from '~/services/colleagues.api';\r\n\r\n  export default {\r\n    name: 'ColleaguesIndex',\r\n    components: {\r\n      ColleaguesList: defineAsyncComponent(() => import('~/components/colleagues/ColleaguesList')),\r\n      AtPagination: defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtPagination/AtPagination')),\r\n    },\r\n    setup() {\r\n      const route = useRoute();\r\n      const routerReplace = useRouterReplace();\r\n      const colleagues = ref({});\r\n      const loading = ref(false);\r\n      const query2 = ref({\r\n        search: route.query.search || '',\r\n        position_id: route.query.position_id || '',\r\n        department_id: route.query.department_id || '',\r\n        team_id: route.query.team_id || '',\r\n        page: route.query.page || '',\r\n        per_page: 15,\r\n      });\r\n\r\n      const getColleagues = () => {\r\n        loading.value = true;\r\n        window.scrollTo(0, 0);\r\n        getAllColleagues(query2.value)\r\n          .then(response => {\r\n            colleagues.value = response?.data;\r\n          })\r\n          .catch(response => {\r\n            $toast.show({ title: 'Error', subTitle: response?.response?.data?.message, type: 'error' });\r\n          })\r\n          .finally(() => (loading.value = false));\r\n      };\r\n\r\n      getColleagues();\r\n\r\n      watchEffect(() => {\r\n        routerReplace.setRouter(query2);\r\n      });\r\n\r\n      watch(\r\n        () => route.query,\r\n        /**\r\n         * Fetch the user information when query change\r\n         * @param {Object} newQueryValue - Query object\r\n         */\r\n        newQueryValue => {\r\n          query2.value = deepCopy(newQueryValue);\r\n          getColleagues();\r\n        }\r\n      );\r\n      return {\r\n        colleagues,\r\n        getColleagues,\r\n        loading,\r\n        route,\r\n        query2,\r\n        routerReplace,\r\n      };\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"sourceRoot":""}]}