{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleagueDetail.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleagueDetail.vue","mtime":1649064658940},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgeyBkZWZpbmVBc3luY0NvbXBvbmVudCwgY29tcHV0ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IENoZXZyb25MZWZ0SWNvbiwgVXNlckljb24sIFVzZXJHcm91cEljb24gfSBmcm9tICdAaGVyb2ljb25zL3Z1ZS9zb2xpZCc7CmltcG9ydCB7IHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldEVtcGxveWVlRGF0YSB9IGZyb20gJ34vc2VydmljZXMvZW1wbG95ZWUuYXBpJzsKaW1wb3J0IHsgJHRvYXN0IH0gZnJvbSAnfi9tYWluJzsKdmFyIF9fZGVmYXVsdF9fID0gewogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIGlmICghdG8ucXVlcnkudGFiKSByZXR1cm4gbmV4dCh7CiAgICAgIHBhdGg6IHRvLnBhdGgsCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgdGFiOiAncHJvZmlsZScKICAgICAgfQogICAgfSk7CiAgICBuZXh0KCk7CiAgfQp9OwoKZnVuY3Rpb24gc2V0dXAoX19wcm9wcywgX3JlZikgewogIHZhciBleHBvc2UgPSBfcmVmLmV4cG9zZTsKICB2YXIgQ29sbGVhZ3Vlc0luY29tZURhdGEgPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gaW1wb3J0KCd+L2NvbXBvbmVudHMvY29sbGVhZ3Vlcy9Db2xsZWFndWVzSW5jb21lRGF0YScpOwogIH0pOwogIHZhciBBdFRhYnMgPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gaW1wb3J0KCd+L3BsdWdpbnMvYWxpZnRlY2gtdWkvY29tcG9uZW50cy9BdFRhYnMvQXRUYWJzJyk7CiAgfSk7CiAgdmFyIEF0QmFkZ2UgPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gaW1wb3J0KCd+L3BsdWdpbnMvYWxpZnRlY2gtdWkvY29tcG9uZW50cy9BdEJhZGdlL0F0QmFkZ2UnKTsKICB9KTsKICB2YXIgQ29sbGVhZ3Vlc1Byb2ZpbGVEYXRhID0gZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGltcG9ydCgnfi9jb21wb25lbnRzL2NvbGxlYWd1ZXMvQ29sbGVhZ3Vlc1Byb2ZpbGVEYXRhJyk7CiAgfSk7CiAgdmFyIEF0QnV0dG9uID0gZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGltcG9ydCgnfi9wbHVnaW5zL2FsaWZ0ZWNoLXVpL2NvbXBvbmVudHMvQXRCdXR0b24vQXRCdXR0b24nKTsKICB9KTsKICB2YXIgQXRTa2VsZXRvbiA9IGRlZmluZUFzeW5jQ29tcG9uZW50KGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBpbXBvcnQoJ34vcGx1Z2lucy9hbGlmdGVjaC11aS9jb21wb25lbnRzL0F0U2tlbGV0b24vQXRTa2VsZXRvbicpOwogIH0pOwogIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgbG9hZGluZyA9IHJlZihmYWxzZSk7CiAgdmFyIHN0YXR1c2VzID0gc3RvcmUuZ2V0dGVyc1snY29yZS9zdGF0dXMnXTsKICB2YXIgY29sbGVhZ3VlRGF0YSA9IHJlZihudWxsKTsKICB2YXIgY29sbGVhZ3VlRGVwYXJ0bWVudCA9IHJlZihudWxsKTsKICB2YXIgdGFiQ29tcG9uZW50cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGluY29tZTogewogICAgICAgIGNvbXBvbmVudDogQ29sbGVhZ3Vlc0luY29tZURhdGEsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHVzZXJJZDogTnVtYmVyKHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHByb2ZpbGU6IHsKICAgICAgICBjb21wb25lbnQ6IENvbGxlYWd1ZXNQcm9maWxlRGF0YSwKICAgICAgICBwcm9wczogewogICAgICAgICAgdXNlcklkOiBOdW1iZXIocm91dGUucGFyYW1zLmlkKQogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9KTsKCiAgdmFyIGdldENvbGxlYWd1ZUhlYWRlckRhdGEgPSBmdW5jdGlvbiBnZXRDb2xsZWFndWVIZWFkZXJEYXRhKENvbGxlYWd1ZUlkKSB7CiAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgIGdldEVtcGxveWVlRGF0YShDb2xsZWFndWVJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29sbGVhZ3VlRGF0YS52YWx1ZSA9IHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIGNvbGxlYWd1ZURlcGFydG1lbnQudmFsdWUgPSByZXNwb25zZSA9PT0gbnVsbCB8fCByZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcG9uc2UuZGF0YS5kYXRhLnRlYW1zOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHZhciBfZXJyb3IkcmVzcG9uc2UsIF9lcnJvciRyZXNwb25zZSRkYXRhOwoKICAgICAgICAkdG9hc3Quc2hvdyh7CiAgICAgICAgICB0aXRsZTogJ0Vycm9yJywKICAgICAgICAgIHN1YlRpdGxlOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZXJyb3IkcmVzcG9uc2UkZGF0YSA9IF9lcnJvciRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlJGRhdGEubWVzc2FnZSwKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfQogICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9KTsKICB9OwoKICBnZXRDb2xsZWFndWVIZWFkZXJEYXRhKE51bWJlcihyb3V0ZS5wYXJhbXMuaWQpKTsKICB2YXIgX19yZXR1cm5lZF9fID0gewogICAgQ29sbGVhZ3Vlc0luY29tZURhdGE6IENvbGxlYWd1ZXNJbmNvbWVEYXRhLAogICAgQXRUYWJzOiBBdFRhYnMsCiAgICBBdEJhZGdlOiBBdEJhZGdlLAogICAgQ29sbGVhZ3Vlc1Byb2ZpbGVEYXRhOiBDb2xsZWFndWVzUHJvZmlsZURhdGEsCiAgICBBdEJ1dHRvbjogQXRCdXR0b24sCiAgICBBdFNrZWxldG9uOiBBdFNrZWxldG9uLAogICAgcm91dGU6IHJvdXRlLAogICAgc3RvcmU6IHN0b3JlLAogICAgbG9hZGluZzogbG9hZGluZywKICAgIHN0YXR1c2VzOiBzdGF0dXNlcywKICAgIGNvbGxlYWd1ZURhdGE6IGNvbGxlYWd1ZURhdGEsCiAgICBjb2xsZWFndWVEZXBhcnRtZW50OiBjb2xsZWFndWVEZXBhcnRtZW50LAogICAgdGFiQ29tcG9uZW50czogdGFiQ29tcG9uZW50cywKICAgIGdldENvbGxlYWd1ZUhlYWRlckRhdGE6IGdldENvbGxlYWd1ZUhlYWRlckRhdGEsCiAgICBkZWZpbmVBc3luY0NvbXBvbmVudDogZGVmaW5lQXN5bmNDb21wb25lbnQsCiAgICBjb21wdXRlZDogY29tcHV0ZWQsCiAgICByZWY6IHJlZiwKICAgIENoZXZyb25MZWZ0SWNvbjogQ2hldnJvbkxlZnRJY29uLAogICAgVXNlckljb246IFVzZXJJY29uLAogICAgVXNlckdyb3VwSWNvbjogVXNlckdyb3VwSWNvbiwKICAgIHVzZVJvdXRlOiB1c2VSb3V0ZSwKICAgIHVzZVN0b3JlOiB1c2VTdG9yZSwKICAgIGdldEVtcGxveWVlRGF0YTogZ2V0RW1wbG95ZWVEYXRhLAogICAgJHRvYXN0OiAkdG9hc3QKICB9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIHZhbHVlOiB0cnVlCiAgfSk7CiAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKfQoKZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL09iamVjdC5hc3NpZ24oX19kZWZhdWx0X18sIHsKICBzZXR1cDogc2V0dXAKfSk7"},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleagueDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\n  export default {\n    beforeRouteEnter(to, from, next) {\n      if (!to.query.tab) return next({ path: to.path, query: { tab: 'profile' } });\n      next();\n    },\n  };\n</script>\n\n<script setup>\n  import { defineAsyncComponent, computed, ref } from 'vue';\n  import { ChevronLeftIcon, UserIcon, UserGroupIcon } from '@heroicons/vue/solid';\n  import { useRoute } from 'vue-router';\n  import { useStore } from 'vuex';\n  import { getEmployeeData } from '~/services/employee.api';\n  import { $toast } from '~/main';\n  const ColleaguesIncomeData = defineAsyncComponent(() => import('~/components/colleagues/ColleaguesIncomeData'));\n  const AtTabs = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtTabs/AtTabs'));\n  const AtBadge = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtBadge/AtBadge'));\n  const ColleaguesProfileData = defineAsyncComponent(() => import('~/components/colleagues/ColleaguesProfileData'));\n  const AtButton = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtButton/AtButton'));\n  const AtSkeleton = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtSkeleton/AtSkeleton'));\n  const route = useRoute();\n  const store = useStore();\n  const loading = ref(false);\n  const statuses = store.getters['core/status'];\n  const colleagueData = ref(null);\n  const colleagueDepartment = ref(null);\n  const tabComponents = computed(() => ({\n    income: {\n      component: ColleaguesIncomeData,\n      props: {\n        userId: Number(route.params.id),\n      },\n    },\n    profile: {\n      component: ColleaguesProfileData,\n      props: {\n        userId: Number(route.params.id),\n      },\n    },\n  }));\n\n  const getColleagueHeaderData = ColleagueId => {\n    loading.value = true;\n    getEmployeeData(ColleagueId)\n      .then(response => {\n        colleagueData.value = response?.data.data;\n        colleagueDepartment.value = response?.data.data.teams;\n      })\n      .catch(error => {\n        if (error) {\n          $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n        }\n      })\n      .finally(() => (loading.value = false));\n  };\n  getColleagueHeaderData(Number(route.params.id));\n</script>\n\n<template>\n  <div>\n    <div class=\"-m-6 mb-4\">\n      <div class=\"w-full bg-alpha pb-5\">\n        <div v-if=\"loading\">\n          <at-skeleton class=\"px-4 py-2\" type=\"row\"></at-skeleton>\n          <at-skeleton class=\"px-4 py-2\" type=\"row\"></at-skeleton>\n        </div>\n        <div v-else>\n          <div class=\"flex items-center p-3 border-b\">\n            <chevron-left-icon\n              class=\"w-10 h-18 text-gray-300 mr-2 ml-2 cursor-pointer\"\n              @click=\"$router.go(-1)\"\n            ></chevron-left-icon>\n            <h1 @click=\"$router.go(-1)\" class=\"text-xl font-bold cursor-pointer\">{{ colleagueData?.name || '-' }}</h1>\n            <div class=\"flex-grow flex items-center justify-end\">\n              <AtButton class=\"mr-6\" size=\"sm\" :to=\"{ name: 'productivity.index' }\">Перейти к продуктивности</AtButton>\n            </div>\n          </div>\n          <div class=\"ml-9 mt-4 flex items-center\">\n            <at-badge class=\"mr-4\" :color=\"statuses[colleagueData?.status - 1]?.color\" rounded>\n              {{ statuses[colleagueData?.status - 1]?.name }}\n            </at-badge>\n            <user-icon class=\"w-6 h-6 text-gray-400 items-center\"></user-icon>\n            <p class=\"ml-2 mr-6\">{{ colleagueData?.current_position?.position?.name || '-' }}</p>\n            <user-group-icon class=\"w-6 h-6 text-gray-400 items-center\"></user-group-icon>\n            <p class=\"ml-2\">{{ colleagueDepartment[colleagueDepartment?.length - 1]?.department?.name || '-' }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"mt-6\">\n      <AtTabs\n        :items=\"[\n          { title: 'Профиль', value: 'profile' },\n          { title: 'Доход', value: 'income', exact: true },\n        ]\"\n        :model-value=\"$route.query.tab\"\n        @update:model-value=\"$router.push({ path: $route.path, query: { tab: $event } })\"\n      />\n      <keep-alive>\n        <component\n          :is=\"tabComponents[route.query.tab]?.component || tabComponents.profile.component\"\n          v-bind=\"tabComponents[route.query.tab]?.props || tabComponents.profile.props\"\n        ></component>\n      </keep-alive>\n    </div>\n  </div>\n</template>\n"]}]}