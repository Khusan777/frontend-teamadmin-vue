{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue?vue&type=template&id=ec0659f2","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue","mtime":1647964791346},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2sgfSBmcm9tICJ2dWUiOwoKdmFyIF9ob2lzdGVkXzEgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAiLW0tNiBtYi00Igp9LCBbLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICBjbGFzczogInctZnVsbCBiZy1hbHBoYSIKfSwgWy8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICJmbGV4IGl0ZW1zLWNlbnRlciBwLTQgYm9yZGVyLWIiCn0sIFsvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDEiLCB7CiAgY2xhc3M6ICJ0ZXh0LTJ4bCBmb250LWJvbGQgcHgtNCIKfSwgItCh0L7RgtGA0YPQtNC90LjQutC4IildKV0pXSwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJncmlkIGdyaWQtY29scy00IGl0ZW1zLWVuZCBnYXAteC00IGdhcC15LTYgbWItNiIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJmbGV4IGp1c3RpZnktZW5kIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfJHNldHVwJGNvbGxlYWd1ZXMsIF8kc2V0dXAkY29sbGVhZ3VlcyRtZSwgXyRzZXR1cCRjb2xsZWFndWVzMiwgXyRzZXR1cCRjb2xsZWFndWVzMiRtOwoKICB2YXIgX2NvbXBvbmVudF9jb2xsZWFndWVzX2xpc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiY29sbGVhZ3Vlcy1saXN0Iik7CgogIHZhciBfY29tcG9uZW50X2F0X3BhZ2luYXRpb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiYXQtcGFnaW5hdGlvbiIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19ob2lzdGVkXzEsIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9jb2xsZWFndWVzX2xpc3QsIHsKICAgIGNvbGxlYWd1ZXM6ICRzZXR1cC5jb2xsZWFndWVzLAogICAgbG9hZGluZzogJHNldHVwLmxvYWRpbmcKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsiY29sbGVhZ3VlcyIsICJsb2FkaW5nIl0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFsoKF8kc2V0dXAkY29sbGVhZ3VlcyA9ICRzZXR1cC5jb2xsZWFndWVzKSA9PT0gbnVsbCB8fCBfJHNldHVwJGNvbGxlYWd1ZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfJHNldHVwJGNvbGxlYWd1ZXMkbWUgPSBfJHNldHVwJGNvbGxlYWd1ZXMubWV0YSkgPT09IG51bGwgfHwgXyRzZXR1cCRjb2xsZWFndWVzJG1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfJHNldHVwJGNvbGxlYWd1ZXMkbWUubGFzdF9wYWdlKSA+IDEgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9hdF9wYWdpbmF0aW9uLCB7CiAgICBrZXk6IDAsCiAgICBjbGFzczogInB5LTQgbWQ6Y29sLXNwYW4tMSBqdXN0aWZ5LWVuZCIsCiAgICBtb2RlbFZhbHVlOiAkc2V0dXAucXVlcnkyLnBhZ2UsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLnF1ZXJ5Mi5wYWdlID0gJGV2ZW50OwogICAgfSksCiAgICB0b3RhbDogKF8kc2V0dXAkY29sbGVhZ3VlczIgPSAkc2V0dXAuY29sbGVhZ3VlcykgPT09IG51bGwgfHwgXyRzZXR1cCRjb2xsZWFndWVzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF8kc2V0dXAkY29sbGVhZ3VlczIkbSA9IF8kc2V0dXAkY29sbGVhZ3VlczIubWV0YSkgPT09IG51bGwgfHwgXyRzZXR1cCRjb2xsZWFndWVzMiRtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfJHNldHVwJGNvbGxlYWd1ZXMyJG0ubGFzdF9wYWdlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm1vZGVsVmFsdWUiLCAidG90YWwiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpXSldLCA2NAogIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICk7Cn0="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-teamadmin-vue/src/pages/colleagues/ColleaguesIndex.vue"],"names":[],"mappings":";;8BACE,mBAAA,CAMM,KANN,EAMM;AAND,EAAA,KAAK,EAAC;AAML,CANN,EAAsB,C,aACpB,mBAAA,CAIM,KAJN,EAIM;AAJD,EAAA,KAAK,EAAC;AAIL,CAJN,EAA4B,C,aAC1B,mBAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC;AAEL,CAFN,EAA2C,C,aACzC,mBAAA,CAAmD,IAAnD,EAAmD;AAA/C,EAAA,KAAK,EAAC;AAAyC,CAAnD,EAAoC,YAApC,CADyC,CAA3C,CAD0B,CAA5B,CADoB,CAAtB,E;;AAAA,C;;;AAOK,EAAA,KAAK,EAAC;;;AAGN,EAAA,KAAK,EAAC;;;;;;;;;6DAVX,U,EAOA,mBAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADJ,YAAA,CAA+E,0BAA/E,EAA+E;AAA7D,IAAA,UAAU,EAAE,MAAA,CAAA,UAAiD;AAApC,IAAA,OAAO,EAAE,MAAA,CAAA;AAA2B,GAA/E,E,IAAA,E;;AAAA,I,yBAAA,CACI,CAFN,C,EAGA,mBAAA,CAQM,KARN,EAAA,UAAA,EAQM,CANI,uBAAA,MAAA,CAAA,UAAA,mGAAY,IAAZ,gFAAkB,SAAlB,IAA2B,C,kBADnC,YAAA,CAMgB,wBANhB,EAMgB;UAAA;AAJd,IAAA,KAAK,EAAC,gCAIQ;gBAHL,MAAA,CAAA,MAAA,CAAO,IAGF;;aAHL,MAAA,CAAA,MAAA,CAAO,IAAP,GAAW,M;MAGN;AAFb,IAAA,KAAK,yBAAE,MAAA,CAAA,UAAF,iFAAE,oBAAY,IAAd,0DAAE,sBAAkB;AAEZ,GANhB,E,IAAA,E;;AAAA,I,uBAAA,C,qCAOI,CARN,C","sourcesContent":["<template>\r\n  <div class=\"-m-6 mb-4\">\r\n    <div class=\"w-full bg-alpha\">\r\n      <div class=\"flex items-center p-4 border-b\">\r\n        <h1 class=\"text-2xl font-bold px-4\">Сотрудники</h1>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"grid grid-cols-4 items-end gap-x-4 gap-y-6 mb-6\">\r\n    <colleagues-list :colleagues=\"colleagues\" :loading=\"loading\"></colleagues-list>\r\n  </div>\r\n  <div class=\"flex justify-end\">\r\n    <at-pagination\r\n      v-if=\"colleagues?.meta?.last_page > 1\"\r\n      class=\"py-4 md:col-span-1 justify-end\"\r\n      v-model=\"query2.page\"\r\n      :total=\"colleagues?.meta?.last_page\"\r\n    >\r\n    </at-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { ref, watch, watchEffect, defineAsyncComponent } from 'vue';\r\n  import { useRoute } from 'vue-router';\r\n  import useRouterReplace from '~/utils/hooks/useRouterReplace';\r\n  import { deepCopy } from '~/plugins/aliftech-ui/utils';\r\n  import { $toast } from '~/main';\r\n  import { useStore } from 'vuex';\r\n\r\n  export default {\r\n    name: 'ColleaguesIndex',\r\n    components: {\r\n      ColleaguesList: defineAsyncComponent(() => import('~/components/colleagues/ColleaguesList')),\r\n      AtPagination: defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtPagination/AtPagination')),\r\n    },\r\n    setup() {\r\n      const route = useRoute();\r\n      const routerReplace = useRouterReplace();\r\n      const colleagues = ref({});\r\n      const loading = ref(false);\r\n      const store = useStore();\r\n      const query2 = ref({\r\n        search: route.query.search || '',\r\n        position_id: route.query.position_id || '',\r\n        department_id: route.query.department_id || '',\r\n        team_id: route.query.team_id || '',\r\n        page: route.query.page || '',\r\n        per_page: 15,\r\n      });\r\n\r\n      const getColleagues = () => {\r\n        loading.value = true;\r\n        window.scrollTo(0, 0);\r\n        store\r\n          .dispatch('core/getEmployeesData', query2.value)\r\n          .then(() => {\r\n            colleagues.value = store.getters['core/getEmployeeData']?.data;\r\n          })\r\n          .catch(() => {\r\n            $toast.show({ title: 'Error', subTitle: store.getters['core/getEmployeeData']?.error, type: 'error' });\r\n          })\r\n          .finally(() => (loading.value = store.getters['core/getEmployeeData'].loading));\r\n      };\r\n\r\n      getColleagues();\r\n\r\n      watchEffect(() => {\r\n        routerReplace.setRouter(query2);\r\n      });\r\n\r\n      watch(\r\n        () => route.query,\r\n        /**\r\n         * Fetch the user information when query change\r\n         * @param {Object} newQueryValue - Query object\r\n         */\r\n        newQueryValue => {\r\n          query2.value = deepCopy(newQueryValue);\r\n          getColleagues();\r\n        }\r\n      );\r\n      return {\r\n        colleagues,\r\n        getColleagues,\r\n        loading,\r\n        route,\r\n        query2,\r\n        routerReplace,\r\n      };\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"sourceRoot":""}]}